/**
 * Jindo Mobile Component
 * @version 1.17.1
 * 
 * NAVER Corp; JindoJS JavaScript Framework
 * http://jindo.dev.naver.com/
 * 
 * Released under the LGPL v2 license
 * http://www.gnu.org/licenses/old-licenses/lgpl-2.0.html
 */
/**
 *	jindo.m
 *	jindo.m.Component
 *	jindo.m.UIComponent
 *	jindo.m.Effect
 *	jindo.m.Morph
 *	jindo.m.Animation
 *	jindo.m.LayerEffect
 *	jindo.m._Effect_
 *	jindo.m.SlideEffect
 *	jindo.m.CoreTab
 *	jindo.m.Cover
 *	jindo.m.Touch
 *	jindo.m.SwipeCommon
 *	jindo.m.Flick
 *	jindo.m.CoverFlicking
 *	jindo.m.Slide
 *	jindo.m.SlideFlicking
 *	jindo.m.SlideTab
 */
var raf=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,caf=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame;if(raf&&!caf){var keyInfo={},oldraf=raf;raf=function(t){function e(){keyInfo[n]&&t()}var n=oldraf(e);return keyInfo[n]=!0,n},caf=function(t){delete keyInfo[t]}}else raf&&caf||(raf=function(t){return window.setTimeout(t,16)},caf=window.clearTimeout);window.requestAnimationFrame=raf,window.cancelAnimationFrame=caf,jindo.m=function(){function _initTouchEventName(){"ontouchstart"in window?(_htTouchEventName.start="touchstart",_htTouchEventName.move="touchmove",_htTouchEventName.end="touchend",_htTouchEventName.cancel="touchcancel"):window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0&&(_htTouchEventName.start="MSPointerDown",_htTouchEventName.move="MSPointerMove",_htTouchEventName.end="MSPointerUp",_htTouchEventName.cancel="MSPointerCancel")}function _getOrientationChangeEvt(){var t="onorientationchange"in window?"orientationchange":"resize";return _htOsInfo.android&&"2.1"===_htOsInfo.version&&(t="resize"),t}function _getVertical(){var t=null,e=_getOrientationChangeEvt();if("resize"===e){var n=document.documentElement.clientWidth;t=-1==_nPreWidth?n<document.documentElement.clientHeight:_nPreWidth>n?!0:n==_nPreWidth?_isVertical:!1,_nPreWidth=n}else{var i=window.orientation;0===i||180==i?t=!0:(90==i||-90==i)&&(t=!1)}return t}function _attachEvent(){jindo.$Fn(_onOrientationChange,this).attach(window,_getOrientationChangeEvt()).attach(window,"load"),jindo.$Fn(_onPageshow,this).attach(window,"pageshow")}function _initDeviceInfo(){function t(t,e){return(e||"").indexOf(t)>-1}_setOsInfo(),_setBrowserInfo();var e=navigator.userAgent;_htDeviceInfo={iphone:_htOsInfo.iphone,ipad:_htOsInfo.ipad,android:_htOsInfo.android,win:t("Windows Phone",e),galaxyTab:/SHW-M180/.test(e),galaxyTab2:/SHW-M380/.test(e),galaxyS:/SHW-M110/.test(e),galaxyS2:/SHW-M250|GT-I9100/.test(e),galaxyS2LTE:/SHV-E110/.test(e),galaxyS3:/SHV-E210|SHW-M440|GT-I9300/.test(e),galaxyNote:/SHV-E160/.test(e),galaxyNote2:/SHV-E250/.test(e),galaxyNexus:/Galaxy Nexus/.test(e),optimusLte2:/LG-F160/.test(e),optimusVu:/LG-F100/.test(e),optimusLte:/LG-LU6200|LG-SU640|LG-F120K'/.test(e),galaxyS4:/SHV-E300|GT-I9500|GT-I9505|SGH-M919|SPH-L720|SGH-I337|SCH-I545/.test(e),bChrome:_htBrowserInfo.chrome,bSBrowser:_htBrowserInfo.bSBrowser,bInapp:!1,version:_htOsInfo.version,browserVersion:_htBrowserInfo.version};for(var n in _htDeviceInfo)"boolean"==typeof _htDeviceInfo[n]&&_htDeviceInfo[n]&&_htDeviceInfo.hasOwnProperty(n)&&"b"!==n[0]&&(_htDeviceInfo.name=n);_htDeviceInfo.samsung=/GT-|SCH-|SHV-|SHW-|SPH|SWT-|SGH-|EK-|Galaxy Nexus|SAMSUNG/.test(e),_htDeviceInfo.lg=/LG-/.test(e),_htDeviceInfo.pantech=/IM-/.test(e),_htDeviceInfo.iphone||_htDeviceInfo.ipad?t("Safari",e)||(_htDeviceInfo.bInapp=!0):_htDeviceInfo.android&&(e=e.toLowerCase(),(t("inapp",e)||t("app",e.replace("applewebkit","")))&&(_htDeviceInfo.bInapp=!0))}function _setOsInfo(){_htOsInfo=jindo.$Agent().os(),_isInapp(),_htOsInfo.version=_htOsInfo.version||_getOsVersion(),_htOsInfo.ios="undefined"==typeof _htOsInfo.ios?_htOsInfo.ipad||_htOsInfo.iphone:_htOsInfo.ios}function _setBrowserInfo(){_htBrowserInfo=jindo.$Agent().navigator(),_htOsInfo.ios&&/CriOS/.test(navigator.userAgent)&&(_htBrowserInfo.chrome=!0),"undefined"==typeof _htBrowserInfo.firefox&&(_htBrowserInfo.firefox=/Firefox/.test(navigator.userAgent)),_isSBrowser(),_updateUnderVersion()}function _updateUnderVersion(){_htBrowserInfo.msafari&&_htBrowserInfo.chrome?_htBrowserInfo.version=parseFloat(_htOsInfo.ios?navigator.userAgent.match(/CriOS[ \/]([0-9.]+)/)[1]:navigator.userAgent.match(/Chrome[ \/]([0-9.]+)/)[1]):_htBrowserInfo.firefox&&(_htBrowserInfo.version=parseFloat(navigator.userAgent.match(/Firefox[ \/]([0-9.]+)/)[1]))}function _isInapp(){var t=navigator.userAgent;_htOsInfo.bInapp=!1,_htOsInfo.ios?-1==t.indexOf("Safari")&&(_htOsInfo.bInapp=!0):_htOsInfo.android&&(t=t.toLowerCase(),(-1!=t.indexOf("inapp")||-1!=t.replace("applewebkit","").indexOf("app"))&&(_htOsInfo.bInapp=!0))}function _isSBrowser(){_htBrowserInfo.bSBrowser=!1;var t=navigator.userAgent,e=t.match(/(SAMSUNG|Chrome)/gi)||"";e.length>1&&(_htBrowserInfo.bSBrowser=!0)}function _getOsVersion(){if(!_htOsInfo.version){var t,e=navigator.userAgent,n="";return _htOsInfo.iphone||_htOsInfo.ipad?(t=e.match(/OS\s([\d|\_]+\s)/i),null!==t&&t.length>1&&(n=t[1])):_htOsInfo.android?(t=e.match(/Android\s([^\;]*)/i),null!==t&&t.length>1&&(n=t[1])):_htOsInfo.mwin&&(t=e.match(/Windows Phone\s([^\;]*)/i),null!==t&&t.length>1&&(n=t[1])),n.replace(/\_/g,".").replace(/\s/g,"")}}function _onOrientationChange(t){if("load"===t.type)return _nPreWidth=document.documentElement.clientWidth,void(_isVertical=_htOsInfo.bInapp||!_htOsInfo.iphone&&!_htOsInfo.ipad&&"resize"===_getOrientationChangeEvt()?_nPreWidth>document.documentElement.clientHeight?!1:!0:_getVertical());if("resize"===_getOrientationChangeEvt())setTimeout(function(){_orientationChange(t)},0);else{var e=jindo.$Document().clientSize().width,n=300;if(_htDeviceInfo.android){if("orientationchange"==t.type&&e==_nPreWidth)return setTimeout(function(){_onOrientationChange(t)},500),!1;_nPreWidth=e}clearTimeout(_nRotateTimer),_nRotateTimer=setTimeout(function(){_orientationChange(t)},n)}}function _orientationChange(t){var e=_isVertical;_isVertical=_getVertical(),(jindo.$Agent().navigator().mobile||jindo.$Agent().os().ipad)&&e!==_isVertical&&(t.sType="rotate",t.isVertical=_isVertical,_fireEvent("mobilerotate",t))}function _onPageshow(t){_isVertical=_getVertical(),t.sType="pageShow",setTimeout(function(){_fireEvent("mobilePageshow",t)},300)}function _getTranslateOffsetFromCSSMatrix(t){var e=new WebKitCSSMatrix(window.getComputedStyle(t).webkitTransform);return{top:e.m42,left:e.m41}}function _fireEvent(t,e){if(_htHandler[t])for(var n=_htHandler[t].concat(),i=0,s=n.length;s>i;i++)n[i].call(this,e)}function _getTranslateOffsetFromStyle(t){var e=0,n=0,i=[],s=[],o=t.style[""==jindo.m.getCssPrefix()?"transform":jindo.m.getCssPrefix()+"Transform"];if(o&&o.length>0){if(/translate[XY]/.test(o)){var a=o.match(/translateX\(([-0-9px]*)\)/),h=o.match(/translateY\(([-0-9px]*)\)/);s.push(a&&a.length>1?a[1]:"0px"),s.push(h&&h.length>1?h[1]:"0px"),i[1]=s.join(",")}else i=o.match(/translate.{0,2}\((.*)\)/);if(i&&i.length>1){var r=i[1].split(",");r&&r.length>1&&(e=parseInt(r[1],10),n=parseInt(r[0],10))}}return{top:e,left:n}}var _isVertical=null,_nPreWidth=-1,_nRotateTimer=null,_htHandler={},_htDeviceInfo={},_htAddPatch={},_htOsInfo={},_htBrowserInfo={},_htTouchEventName={start:"mousedown",move:"mousemove",end:"mouseup",cancel:null},_htDeviceList={galaxyTab:["SHW-M180"],galaxyTab2:["SHW-M380"],galaxyS:["SHW-M110"],galaxyS2:["SHW-M250","GT-I9100"],galaxyS2LTE:["SHV-E110"],galaxyS3:["SHV-E210","SHW-M440","GT-I9300"],galaxyNote:["SHV-E160"],galaxyNote2:["SHV-E250"],galaxyNexus:["Galaxy Nexus"],optimusLte2:["LG-F160"],optimusVu:["LG-F100"],optimusLte:["LG-LU6200","LG-SU640","LG-F120K"]},__M__={MOVETYPE:{0:"hScroll",1:"vScroll",2:"dScroll",3:"tap",4:"longTap",5:"doubleTap",6:"pinch",7:"rotate",8:"pinch-rotate"},KITKAT_HIGHLIGHT_CLASS:"_jmc_no_tap_highlight_",KITKAT_HIGHLIGHT_ID:"_jmc_no_tap_highlight_tag_",sVersion:"unknown",$init:function(){_initDeviceInfo(),_initTouchEventName(),_attachEvent();var t=jindo.$(this.KITKAT_HIGHLIGHT_ID);if(!t){t=document.createElement("style");var e=document.getElementsByTagName("html")[0];t.type="text/css",t.id=this.KITKAT_HIGHLIGHT_ID,e.insertBefore(t,e.firstChild);var n=t.sheet||t.styleSheet;n.insertRule("."+this.KITKAT_HIGHLIGHT_CLASS+" { -webkit-tap-highlight-color: rgba(0,0,0,0); }",0),n.insertRule("."+this.KITKAT_HIGHLIGHT_CLASS+" * { -webkit-tap-highlight-color: rgba(0,0,0,0); }",0)}},bindRotate:function(t){var e=_htHandler.mobilerotate;"undefined"==typeof e&&(e=_htHandler.mobilerotate=[]),e.push(t)},unbindRotate:function(t){var e=_htHandler.mobilerotate;if(e)for(var n,i=0;n=e[i];i++)if(n===t){e.splice(i,1);break}},bindPageshow:function(t){var e=_htHandler.mobilePageshow;"undefined"==typeof e&&(e=_htHandler.mobilePageshow=[]),e.push(t)},unbindPageshow:function(t){var e=_htHandler.mobilePageshow;if(e)for(var n,i=0;n=e[i];i++)if(n===t){e.splice(i,1);break}},getDeviceInfo:function(){return _htDeviceInfo},getOsInfo:function(){return _htOsInfo},getBrowserInfo:function(){return _htBrowserInfo},isVertical:function(){return null===_isVertical?_isVertical=_getVertical():_isVertical},getNodeElement:function(t){for(;1!=t.nodeType;)t=t.parentNode;return t},getTranslateOffset:function(t){t=jindo.$Element(t);var e,n=t.$value();return e=_htOsInfo.android&&3===parseInt(_htOsInfo.version,10)?_getTranslateOffsetFromStyle(n):"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix?_getTranslateOffsetFromCSSMatrix(n):_getTranslateOffsetFromStyle(n)},getStyleOffset:function(t){var e=parseInt(t.css("left"),10),n=parseInt(t.css("top"),10);return e=isNaN(e)?0:e,n=isNaN(n)?0:n,{left:e,top:n}},attachTransitionEnd:function(t,e){var n=(jindo.$Jindo.VERSION||jindo.$Jindo().version||jindo.VERSION).replace(/[a-z.]/gi,"");if(n>230)t._jindo_fn_=jindo.$Fn(e,this).attach(t,"transitionend");else{var i=("ms"===this.getCssPrefix()?"MS":this.getCssPrefix())+"TransitionEnd";t.addEventListener(i,e,!1)}},detachTransitionEnd:function(t,e){var n=(jindo.$Jindo.VERSION||jindo.$Jindo().version||jindo.VERSION).replace(/[a-z.]/gi,"");if(n>230)t._jindo_fn_&&(t._jindo_fn_.detach(t,"transitionend"),delete t._jindo_fn_);else{var i=("ms"===this.getCssPrefix()?"MS":this.getCssPrefix())+"TransitionEnd";t.removeEventListener(i,e,!1)}},_attachFakeJindo:function(t,e,n){var i=(jindo.$Jindo.VERSION||jindo.$Jindo().version||jindo.VERSION).replace(/[a-z.]/gi,""),s=null;return s=230>i&&"undefined"!=typeof _notSupport?_notSupport.$Fn(e).attach(t,n):jindo.$Fn(e).attach(t,n)},_getTouchEventName:function(){return _htTouchEventName},getCssPrefix:function(){var t="";return"undefined"!=typeof document.body.style.webkitTransition?t="webkit":"undefined"!=typeof document.body.style.transition||("undefined"!=typeof document.body.style.MozTransition?t="Moz":"undefined"!=typeof document.body.style.OTransition?t="O":"undefined"!=typeof document.body.style.msTransition&&(t="ms")),jindo.m.getCssPrefix=function(){return t},t},getClosest:function(t,e){var n,i=jindo.$Element(e),s=/<\/?(?:h[1-5]|[a-z]+(?:\:[a-z]+)?)[^>]*>/gi;return s.test(t)?"<"+e.tagName.toUpperCase()+">"==t.toUpperCase()?n=e:(n=i.parent(function(e){return"<"+e.$value().tagName.toUpperCase()+">"==t.toUpperCase()?e:void 0}),n=n.length?n[0].$value():!1):(0==t.indexOf(".")&&(t=t.substring(1,t.length)),i.hasClass(t)?n=e:(n=i.parent(function(e){return e.hasClass(t)?e:void 0}),n=n.length?n[0].$value():!1)),n},useCss3d:function(){if(_htAddPatch.useCss3d&&"function"==typeof _htAddPatch.useCss3d)switch(_htAddPatch.useCss3d()){case-1:return!1;case 1:return!0}var t=!1;if(_htBrowserInfo.chrome&&_htBrowserInfo.version<"25"&&!_htBrowserInfo.bSBrowser)return t;if(_htOsInfo.ios)t=!0;else if(_htBrowserInfo.firefox)t=!0;else if(_htOsInfo.android){var e=navigator.userAgent.match(/\(.*\)/);e instanceof Array&&e.length>0&&(e=e[0]),_htOsInfo.version>="4.1.0"?t=/EK-GN120|SM-G386F/.test(e)?!1:!0:(_htOsInfo.version>="4.0"&&(t=!0),_htOsInfo.version>="4.0.3"&&/SHW-|SHV-|GT-|SCH-|SGH-|SPH-|LG-F160|LG-F100|LG-F180|LG-F200|EK-|IM-A|LG-F240|LG-F260/.test(e)&&!/SHW-M420|SHW-M200|GT-S7562/.test(e)&&(t=!0))}return t},patch:function(t){return _htAddPatch.ver=t,this},_checkPatchVersion:function(){var t=jindo.m.Component.VERSION.split("."),e=t.slice(0,3).join(".");return _htAddPatch.ver>=e?!0:!1},add:function(t){if(this._checkPatchVersion())for(var e in t)_htAddPatch[e]=t[e];return this},getDeviceName:function(){if(_htAddPatch.getDeviceName&&"function"==typeof _htAddPatch.getDeviceName&&_htAddPatch.getDeviceName())return _htAddPatch.getDeviceName();var sUserAgent=navigator.userAgent;for(var i in _htDeviceList)if(eval("/"+_htDeviceList[i].join("|")+"/").test(sUserAgent))return i;var htInfo=jindo.$Agent().os();for(var x in htInfo)if(htInfo[x]===!0&&htInfo.hasOwnProperty(x))return x},useFixed:function(){if(_htAddPatch.useFixed&&"function"==typeof _htAddPatch.useFixed)switch(_htAddPatch.useFixed()){case-1:return!1;case 1:return!0}var t=!1;return(_htBrowserInfo.chrome||_htBrowserInfo.firefox||_htOsInfo.android&&parseInt(_htOsInfo.version,10)>=3||_htOsInfo.ios&&parseInt(_htOsInfo.version,10)>=5||_htOsInfo.mwin&&parseInt(_htOsInfo.version,10)>=8)&&(t=!0),t},useTimingFunction:function(){if(_htAddPatch.useTimingFunction&&"function"==typeof _htAddPatch.useTimingFunction&&_htAddPatch.useTimingFunction())switch(_htAddPatch.useTimingFunction()){case-1:return!1;case 1:return!0}var t=this.useCss3d();return _htOsInfo.android?t=!1:_htOsInfo.ios&&parseInt(_htOsInfo.version,10)>=6&&(t=!1),t},_cacheMaxClientSize:{},_fullSizeCheckElement:null,_allEventStop:function(t,e){this._htEvent||(this._htEvent={}),"detach"==e?(this._htEvent.touchstart.detach(document.body,"touchstart").detach(document.body,"touchmove"),this._htEvent={}):this._htEvent.touchstart||"attach"!=e||(this._htEvent.touchstart=jindo.$Fn(t,this).attach(document.body,"touchstart").attach(document.body,"touchmove"))},_stopDefault:function(t){t.stop()},_hasOrientation:void 0!==window.orientation,_maxClientSize:function(t,e){var n=this.getOsInfo();this._allEventStop(this._stopDefault,"attach"),this._fullSizeCheckElement||(this._fullSizeCheckElement=document.createElement("div"));var i=n.android?500:100;i=e?1:i;var s;this._hasOrientation&&(s=Math.abs(window.orientation/90)%2,i=void 0!==this._cacheMaxClientSize[s]?0:i);var o=this;document.body.scrollTop<=1?(document.body.appendChild(o._fullSizeCheckElement),o._fullSizeCheckElement.style.cssText="position:absolute; top: 0px; width:100%;height:"+parseInt(window.innerHeight+200,10)+"px;",window.scrollTo(0,1),setTimeout(function(){o._checkSize(o._hasOrientation,o._cacheMaxClientSize,s,t,o,i)},i)):(this._fullSizeCheckElement.style.height=window.innerHeight+"px",this._checkSize(this._hasOrientation,this._cacheMaxClientSize,s,t,o,i))},_checkSize:function(t,e,n,i,s,o){var a=this.getOsInfo(),h=this.getBrowserInfo();this._allEventStop(this._stopDefault,"attach");var r;t&&e[n]?r=e[n]:(s._fullSizeCheckElement.style.cssText="position:absolute; top: 0px; width:100%;height:"+window.innerHeight+"px;overflow:hidden",r=h.mobile||a.ipad?{width:window.innerWidth,height:window.innerHeight}:{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight},t&&(e[n]=r)),i.call(s,r);var f=this;this._allEventStop(this._stopDefault,"detach"),0===o?this._fullSizeCheckElement.style.height="0px":setTimeout(function(){f._fullSizeCheckElement.style.height="0px"},o)},hasOffsetBug:function(){if(_htAddPatch.hasOffsetBug&&"function"==typeof _htAddPatch.hasOffsetBug)switch(_htAddPatch.hasOffsetBug()){case-1:return!1;case 1:return!0}var t=!1;return t=_htOsInfo.android?_htBrowserInfo.chrome||_htBrowserInfo.firefox?!1:_htOsInfo.version<"4"?!0:!1:!1},hasClickBug:function(){if(_htAddPatch.hasClickBug&&"function"==typeof _htAddPatch.hasClickBug)switch(_htAddPatch.hasClickBug()){case-1:return!1;case 1:return!0}return _htOsInfo.ios||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0||!1},_getTranslate:function(t,e,n){return n="undefined"==typeof n?!0:n,"translate"+(n?"3d(":"(")+t+","+e+(n?",0)":")")},_toPrefixStr:function(t){return t.length<=0?t:(t=""==this.getCssPrefix()?t.charAt(0).toLowerCase()+t.substr(1):t.charAt(0).toUpperCase()+t.substr(1),this.getCssPrefix()+t)},_hasJindoOffsetBug:function(){var t=jindo.$Jindo.VERSION||jindo.$Jindo().version||jindo.VERSION;return t.replace(/\D/gi,"")>="2100"?!1:!0},_hasKitkatHighlightBug:function(){if(_htAddPatch._hasKitkatHighlightBug&&"function"==typeof _htAddPatch._hasKitkatHighlightBug)switch(_htAddPatch._hasKitkatHighlightBug()){case-1:return!1;case 1:return!0}return _htBrowserInfo.chrome&&!_htBrowserInfo.bSBrowser&&_htBrowserInfo.version<35}};return __M__._isUseFixed=__M__.useFixed,__M__._isUseTimingFunction=__M__.useTimingFunction,__M__._isUseCss3d=__M__.useCss3d,__M__.getCssOffset=__M__.getTranslateOffset,__M__.$init(),__M__}(),"mixin"in jindo.$Jindo||(jindo.$Jindo.mixin=function(t,e){var n={};for(var i in t)n[i]=t[i];for(i in e)e.hasOwnProperty(i)&&"undefined"!=typeof e[i]&&(n[i]=e[i]);return n}),jindo.m.Component=jindo.$Class({_htEventHandler:null,_htOption:null,$init:function(){this._htEventHandler={},this._htOption={},this._htOption._htSetter={},this.constructor.$count=(this.constructor.$count||0)+1},option:function(t,e){switch(typeof t){case"undefined":var n={};for(var i in this._htOption)"htCustomEventHandler"!=i&&"_htSetter"!=i&&(n[i]=this._htOption[i]);return n;case"string":if("undefined"==typeof e)return this._htOption[t];if("htCustomEventHandler"==t){if("undefined"!=typeof this._htOption[t])return this;this.attach(e)}this._htOption[t]=e,"function"==typeof this._htOption._htSetter[t]&&this._htOption._htSetter[t](e);break;case"object":for(var s in t){if("htCustomEventHandler"==s){if("undefined"!=typeof this._htOption[s])continue;this.attach(t[s])}"_htSetter"!==s&&(this._htOption[s]=t[s]),"function"==typeof this._htOption._htSetter[s]&&this._htOption._htSetter[s](t[s])}}return this},optionSetter:function(t,e){switch(typeof t){case"undefined":return this._htOption._htSetter;case"string":if("undefined"==typeof e)return this._htOption._htSetter[t];this._htOption._htSetter[t]=jindo.$Fn(e,this).bind();break;case"object":for(var n in t)this._htOption._htSetter[n]=jindo.$Fn(t[n],this).bind()}return this},fireEvent:function(t,e){e=e||{};var n=this["on"+t],i=this._htEventHandler[t]||[],s="function"==typeof n,o=i.length>0;if(!s&&!o)return!0;i=i.concat(),e.sType=t,"undefined"==typeof e._aExtend&&(e._aExtend=[],e.stop=function(){e._aExtend.length>0&&(e._aExtend[e._aExtend.length-1].bCanceled=!0)}),e._aExtend.push({sType:t,bCanceled:!1});var a,h,r=[e];for(a=2,h=arguments.length;h>a;a++)r.push(arguments[a]);if(s&&n.apply(this,r),o){var f;for(a=0,f;f=i[a];a++)f.apply(this,r)}return!e._aExtend.pop().bCanceled},attach:function(t,e){if(1==arguments.length)return jindo.$H(arguments[0]).forEach(jindo.$Fn(function(t,e){this.attach(e,t)},this).bind()),this;var n=this._htEventHandler[t];return"undefined"==typeof n&&(n=this._htEventHandler[t]=[]),n.push(e),this},detach:function(t,e){if(1==arguments.length)return jindo.$H(arguments[0]).forEach(jindo.$Fn(function(t,e){this.detach(e,t)},this).bind()),this;var n=this._htEventHandler[t];if(n)for(var i,s=0;i=n[s];s++)if(i===e){n=n.splice(s,1);break}return this},detachAll:function(t){var e=this._htEventHandler;if(arguments.length)return"undefined"==typeof e[t]?this:(delete e[t],this);for(var n in e)delete e[n];return this}}),jindo.m.Component.factory=function(t,e){var n,i=[];"undefined"==typeof e&&(e={});for(var s,o=0;s=t[o];o++)n=new this(s,e),i[i.length]=n;return i},jindo.m.Component.getInstance=function(){throw new Error("JC 1.11.0 or JMC 1.13.0 later, getInstance method of Component is not longer supported.")},jindo.m.Component.VERSION="1.17.1",jindo.m.UIComponent=jindo.$Class({$init:function(){this._bIsActivating=!1},isActivating:function(){return this._bIsActivating},activate:function(){return this.isActivating()?this:(this._bIsActivating=!0,arguments.length>0?this._onActivate.apply(this,arguments):this._onActivate(),this)},deactivate:function(){return this.isActivating()?(this._bIsActivating=!1,arguments.length>0?this._onDeactivate.apply(this,arguments):this._onDeactivate(),this):this}}).extend(jindo.m.Component),jindo.m.Effect=function(t){if(this instanceof arguments.callee)throw new Error("You can't create a instance of this");var e=/^(\-?[0-9\.]+)(%|\w+)?$/,n=/^rgb\(([0-9]+)\s?,\s?([0-9]+)\s?,\s?([0-9]+)\)$/i,i=/^rgba\(([0-9]+)\s?,\s?([0-9]+)\s?,\s?([0-9]+),\s?([0-9\.]+)\)$/i,s=/^hsl\(([0-9\.]+)\s?,\s?([0-9\.]+)%\s?,\s?([0-9\.]+)%\)$/i,o=/^hsla\(([0-9\.]+)\s?,\s?([0-9\.]+)%\s?,\s?([0-9\.]+)%,\s?([0-9\.]+)\)$/i,a=/^#([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,h=/^#([0-9A-F])([0-9A-F])([0-9A-F])$/i,r=function(t){var r,f=t;if(e.test(t))f=parseFloat(t),r=RegExp.$2||"";else if(n.test(t))f={rgb:[parseInt(RegExp.$1,10),parseInt(RegExp.$2,10),parseInt(RegExp.$3,10),1]},r="color";else if(i.test(t))f={rgb:[parseInt(RegExp.$1,10),parseInt(RegExp.$2,10),parseInt(RegExp.$3,10),parseFloat(RegExp.$4)]},r="color";else if(s.test(t))f={hsl:[parseFloat(RegExp.$1),parseFloat(RegExp.$2)/100,parseFloat(RegExp.$3)/100,1]},f.rgb=l.apply(this,f.hsl),r="color";else if(o.test(t))f={hsl:[parseFloat(RegExp.$1),parseFloat(RegExp.$2)/100,parseFloat(RegExp.$3)/100,parseFloat(RegExp.$4)]},f.rgb=l.apply(this,f.hsl),r="color";else{if(!a.test(t=t.replace(h,"#$1$1$2$2$3$3")))throw new Error("unit error ("+t+")");f={rgb:[parseInt(RegExp.$1,16),parseInt(RegExp.$2,16),parseInt(RegExp.$3,16),1]},r="color"}return{nValue:f,sUnit:r}},f=function(t){var e=[];return t.replace(/([^\s]+\([^\)]*\)|[^\s]+)\s?/g,function(t,n){e.push(n)}),e},u=function(t){for(var e=f(t?t+"":"0"),n=[],i=0,s=e.length;s>i;i++)n.push(r(e[i]));return n},c=function(t){return"object"==typeof t?{nValue:t.nValue,sUnit:t.sUnit}:t},l=function(t,e,n,i){t=t%360/60;var s=(1-Math.abs(2*n-1))*e,o=s*(1-Math.abs(t%2-1)),a=0,h=0,r=0;t>=5||1>t?(a=s,r=o):t>=4?(a=o,r=s):t>=3?(h=o,r=s):t>=2?(h=s,r=o):t>=1&&(a=o,h=s);var f=n-s/2;return[Math.round(255*(a+f)),Math.round(255*(h+f)),Math.round(255*(r+f)),i]};return function(e,n){var i,s,o=function(){var t=!1;if(a.start!==e&&(i=u(a.start),e=a.start,t=!0),a.end!==n&&(s=u(a.end),n=a.end,t=!0),t){var o,h,r=Math.max(i.length,s.length);if(i.length!==s.length&&r>1){switch(i.length){case 1:i[1]=c(i[0]);case 2:i[2]=c(i[0]);case 3:i[3]=c(i[1])}switch(s.length){case 1:s[1]=c(s[0]);case 2:s[2]=c(s[0]);case 3:s[3]=c(s[1])}}for(var f=0;r>f;f++)if(o=i[f],h=s[f],0===o.nValue?o.sUnit=h.sUnit:0===h.nValue&&(h.sUnit=o.sUnit),o.sUnit!=h.sUnit)throw new Error("unit error ("+e+" ~ "+n+")")}},a=function(e){var n=[];o();for(var a,h,r,f,u,c,l=0,_=Math.max(i.length,s.length);_>l;l++){a=i[l],h=s[l],r=a.nValue,f=h.nValue,u=a.sUnit;var d=t(e),m=function(t,e,n){return Math.round(1e6*((e-t)*d+t))/1e6+(n||0)};if("color"===u)if(r.hsl&&f.hsl){r=r.hsl,f=f.hsl;var p=Math.round(m(r[0],f[0])),v=100*Math.max(0,Math.min(1,m(r[1],f[1]))),g=100*Math.max(0,Math.min(1,m(r[2],f[2])));c=m(r[3],f[3]),n.push(1===c?"hsl("+[p,v+"%",g+"%"].join(",")+")":"hsla("+[p,v+"%",g+"%",c].join(",")+")")}else{r=r.rgb,f=f.rgb;var E=Math.max(0,Math.min(255,Math.round(m(r[0],f[0])))),T=Math.max(0,Math.min(255,Math.round(m(r[1],f[1])))),I=Math.max(0,Math.min(255,Math.round(m(r[2],f[2]))));if(c=m(r[3],f[3]),1===c){var b=(E<<16|T<<8|I).toString(16).toUpperCase();n.push("#"+Array(7-b.length).join("0")+b)}else n.push("rgba("+[E,T,I,c].join(",")+")")}else n.push(m(r,f,u))}return n.join(" ")};switch(arguments.length){case 0:break;case 1:n=e||"0",e="0",a.setStart=function(t){this.start=t}}return a.start=e,a.end=n,a.effectConstructor=arguments.callee,e=n=null,arguments.length>1&&o(),a}},jindo.m.Effect.linear=jindo.m.Effect(function(t){return t}),jindo.m.Effect.linear.toString=function(){return"linear"},jindo.m.Effect.easeInSine=jindo.m.Effect(function(t){return 1==t?1:-Math.cos(t*(Math.PI/2))+1}),jindo.m.Effect.easeOutSine=jindo.m.Effect(function(t){return Math.sin(t*(Math.PI/2))}),jindo.m.Effect.easeInOutSine=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeInSine(0,1)(2*t):.5*jindo.m.Effect.easeOutSine(0,1)(2*t-1)+.5}),jindo.m.Effect.easeOutInSine=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeOutSine(0,1)(2*t):.5*jindo.m.Effect.easeInSine(0,1)(2*t-1)+.5}),jindo.m.Effect.easeInQuad=jindo.m.Effect(function(t){return t*t}),jindo.m.Effect.easeOutQuad=jindo.m.Effect(function(t){return-(t*(t-2))}),jindo.m.Effect.easeInOutQuad=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeInQuad(0,1)(2*t):.5*jindo.m.Effect.easeOutQuad(0,1)(2*t-1)+.5}),jindo.m.Effect.easeOutInQuad=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeOutQuad(0,1)(2*t):.5*jindo.m.Effect.easeInQuad(0,1)(2*t-1)+.5}),jindo.m.Effect.easeInCubic=jindo.m.Effect(function(t){return Math.pow(t,3)}),jindo.m.Effect.easeOutCubic=jindo.m.Effect(function(t){return Math.pow(t-1,3)+1}),jindo.m.Effect.easeInOutCubic=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeIn(0,1)(2*t):.5*jindo.m.Effect.easeOut(0,1)(2*t-1)+.5}),jindo.m.Effect.easeOutInCubic=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeOut(0,1)(2*t):.5*jindo.m.Effect.easeIn(0,1)(2*t-1)+.5}),jindo.m.Effect.easeInQuart=jindo.m.Effect(function(t){return Math.pow(t,4)}),jindo.m.Effect.easeOutQuart=jindo.m.Effect(function(t){return-(Math.pow(t-1,4)-1)}),jindo.m.Effect.easeInOutQuart=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeInQuart(0,1)(2*t):.5*jindo.m.Effect.easeOutQuart(0,1)(2*t-1)+.5}),jindo.m.Effect.easeOutInQuart=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeOutQuart(0,1)(2*t):.5*jindo.m.Effect.easeInQuart(0,1)(2*t-1)+.5}),jindo.m.Effect.easeInQuint=jindo.m.Effect(function(t){return Math.pow(t,5)}),jindo.m.Effect.easeOutQuint=jindo.m.Effect(function(t){return Math.pow(t-1,5)+1}),jindo.m.Effect.easeInOutQuint=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeInQuint(0,1)(2*t):.5*jindo.m.Effect.easeOutQuint(0,1)(2*t-1)+.5}),jindo.m.Effect.easeOutInQuint=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeOutQuint(0,1)(2*t):.5*jindo.m.Effect.easeInQuint(0,1)(2*t-1)+.5}),jindo.m.Effect.easeInCircle=jindo.m.Effect(function(t){return-(Math.sqrt(1-t*t)-1)}),jindo.m.Effect.easeOutCircle=jindo.m.Effect(function(t){return Math.sqrt(1-(t-1)*(t-1))}),jindo.m.Effect.easeInOutCircle=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeInCircle(0,1)(2*t):.5*jindo.m.Effect.easeOutCircle(0,1)(2*t-1)+.5}),jindo.m.Effect.easeOutInCircle=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeOutCircle(0,1)(2*t):.5*jindo.m.Effect.easeInCircle(0,1)(2*t-1)+.5}),jindo.m.Effect.easeInBack=jindo.m.Effect(function(t){var e=1.70158;return 1==t?1:t/1*(t/1)*((1+e)*t-e)}),jindo.m.Effect.easeOutBack=jindo.m.Effect(function(t){var e=1.70158;return 0===t?0:(t=t/1-1)*t*((e+1)*t+e)+1}),jindo.m.Effect.easeInOutBack=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeInBack(0,1)(2*t):.5*jindo.m.Effect.easeOutBack(0,1)(2*t-1)+.5}),jindo.m.Effect.easeInElastic=jindo.m.Effect(function(t){var e,n=0,i=0;return 0===t?0:1==(t/=1)?1:(n||(n=.3),!i||1>i?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),-(i*Math.pow(2,10*(t-=1))*Math.sin(2*(t-1)*Math.PI/n)))}),jindo.m.Effect.easeOutElastic=jindo.m.Effect(function(t){var e,n=0,i=0;return 0===t?0:1==(t/=1)?1:(n||(n=.3),!i||1>i?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),i*Math.pow(2,-10*t)*Math.sin(2*(t-e)*Math.PI/n)+1)}),jindo.m.Effect.easeInOutElastic=jindo.m.Effect(function(t){var e,n=0,i=0;return 0===t?0:2==(t/=.5)?1:(n||(n=.3*1.5),!i||1>i?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),1>t?-.5*i*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/n):i*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-e)*Math.PI/n)*.5+1)}),jindo.m.Effect.easeOutBounce=jindo.m.Effect(function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}),jindo.m.Effect.easeInBounce=jindo.m.Effect(function(t){return 1-jindo.m.Effect.easeOutBounce(0,1)(1-t)}),jindo.m.Effect.easeInOutBounce=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeInBounce(0,1)(2*t):.5*jindo.m.Effect.easeOutBounce(0,1)(2*t-1)+.5}),jindo.m.Effect.easeInExpo=jindo.m.Effect(function(t){return 0===t?0:Math.pow(2,10*(t-1))}),jindo.m.Effect.easeOutExpo=jindo.m.Effect(function(t){return 1==t?1:-Math.pow(2,-10*t/1)+1}),jindo.m.Effect.easeInOutExpo=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeInExpo(0,1)(2*t):.5*jindo.m.Effect.easeOutExpo(0,1)(2*t-1)+.5}),jindo.m.Effect.easeOutInExpo=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeOutExpo(0,1)(2*t):.5*jindo.m.Effect.easeInExpo(0,1)(2*t-1)+.5}),jindo.m.Effect._cubicBezier=function(t,e,n,i){return function(s){function o(t){return((c*t+u)*t+f)*t}function a(t){return((d*t+_)*t+l)*t}function h(t){return(3*c*t+2*u)*t+f}function r(t,e){var n,i,s,a,r,f;for(s=t,f=0;8>f;f++){if(a=o(s)-t,Math.abs(a)<e)return s;if(r=h(s),Math.abs(r)<1e-6)break;s-=a/r}if(n=0,i=1,s=t,n>s)return n;if(s>i)return i;for(;i>n;){if(a=o(s),Math.abs(a-t)<e)return s;t>a?n=s:i=s,s=.5*(i-n)+n}return s}var f=3*t,u=3*(n-t)-f,c=1-f-u,l=3*e,_=3*(i-e)-l,d=1-l-_;return a(r(s,.005))}},jindo.m.Effect.cubicBezier=function(t,e,n,i){var s=jindo.m.Effect(jindo.m.Effect._cubicBezier(t,e,n,i)),o="cubic-bezier("+[t,e,n,i].join(",")+")";return s.toString=function(){return o},s},jindo.m.Effect.cubicEase=jindo.m.Effect.cubicBezier(.25,.1,.25,1),jindo.m.Effect.cubicEase.toString=function(){return"ease"},jindo.m.Effect.cubicEaseIn=jindo.m.Effect.cubicBezier(.42,0,1,1),jindo.m.Effect.cubicEaseIn.toString=function(){return"ease-in"},jindo.m.Effect.cubicEaseOut=jindo.m.Effect.cubicBezier(0,0,.58,1),jindo.m.Effect.cubicEaseOut.toString=function(){return"ease-out"},jindo.m.Effect.cubicEaseInOut=jindo.m.Effect.cubicBezier(.42,0,.58,1),jindo.m.Effect.cubicEaseInOut.toString=function(){return"ease-in-out"},jindo.m.Effect.cubicEaseOutIn=jindo.m.Effect.cubicBezier(0,.42,1,.58),jindo.m.Effect.overphase=jindo.m.Effect(function(t){return t/=.652785,(Math.sqrt((2-t)*t)+.1*t).toFixed(5)}),jindo.m.Effect.sinusoidal=jindo.m.Effect(function(t){return-Math.cos(t*Math.PI)/2+.5}),jindo.m.Effect.mirror=jindo.m.Effect(function(t){return jindo.m.Effect.sinusoidal(0,1)(.5>t?2*t:1-2*(t-.5))}),jindo.m.Effect.pulse=function(t){return jindo.m.Effect(function(e){return-Math.cos(e*(t-.5)*2*Math.PI)/2+.5})},jindo.m.Effect.wave=function(t,e){return jindo.m.Effect(function(n){return(e||1)*Math.sin(360*t*n*Math.PI/180).toFixed(5)})},jindo.m.Effect.stepStart=jindo.m.Effect(function(t){return 0===t?0:1}),jindo.m.Effect.stepEnd=jindo.m.Effect(function(t){return 1===t?1:0}),jindo.m.Effect.easeIn=jindo.m.Effect.easeInCubic,jindo.m.Effect.easeOut=jindo.m.Effect.easeOutCubic,jindo.m.Effect.easeInOut=jindo.m.Effect.easeInOutCubic,jindo.m.Effect.easeOutIn=jindo.m.Effect.easeOutInCubic,jindo.m.Effect.bounce=jindo.m.Effect.easeOutBounce,jindo.m.Effect.elastic=jindo.m.Effect.easeInElastic,jindo.m.Morph=jindo.$Class({$init:function(t){this.option({fEffect:jindo.m.Effect.linear,bUseTransition:!0}).option(t);var e=document.body.style;this._bTransitionSupport="transition"in e||"webkitTransition"in e||"MozTransition"in e||"OTransition"in e||"msTransition"in e;var n=jindo.$Agent(),i=n.os(),s=n.navigator();this._bHasTransformRenderBug=i.ios&&5===parseInt(i.version,10)&&s.msafari,this._aQueue=[],this._aIngItem=null,this._oRAF=null,this._bPlaying=null,this._nPtr=0,this._nPausePassed=0,this._aRepeat=[],this._sTransitionEnd="webkitTransition"in e&&"webkitTransitionEnd"||"transition"in e&&"transitionend"||"MozTransition"in e&&"transitionend"||"OTransition"in e&&"oTransitionEnd"||"msTransition"in e&&"MSTransitionEnd"},pushAnimate:function(t,e){if(e&&!(e instanceof Array))throw Error("aLists should be a instance of Array");return e=[].concat(e),e.duration=t,this._aQueue.push(e),this},pushKeyframe:function(t,e){return this._aQueue.push({action:"keyframe",args:{duration:t,keyframe:e}}),this},pushWait:function(){for(var t=0,e=arguments.length;e>t;t++){var n=arguments[t];n instanceof this.constructor?this._aQueue.push(n):this.pushAnimate(n,[])}return this},pushCall:function(t){return this._aQueue.push(t),this},pushRepeatStart:function(t){"undefined"==typeof t&&(t=1);var e="L"+Math.round((new Date).getTime()*Math.random());return this._aRepeat.push(e),this._pushLabel(e,t),this},_pushLabel:function(t,e){return"undefined"==typeof e&&(e=1/0),this._aQueue.push({action:"label",args:{label:t,times:e,loops:0}}),this},pushRepeatEnd:function(){var t=this._aRepeat.pop();return this._aQueue.push({action:"goto",args:{label:t}}),this},_waitMorph:function(t){var e=this;
if(!t.isPlaying())return!0;var n=function(){t.detach("end",n).detach("pause",n),e._flushQueue()};return t.attach("end",n).attach("pause",n),!1},_getLabelIndex:function(t){for(var e=null,n=0,i=this._aQueue.length;i>n;n++)if(e=this._aQueue[n],"label"===e.action&&e.args.label===t)return n;return-1},_getRepeatEndIndex:function(t,e){for(var n=null,i=e||0,s=this._aQueue.length;s>i;i++)if(n=this._aQueue[i],"goto"===n.action&&n.args.label===t)return i;return-1},_flushQueue:function(){var t,e,n,i,s,o=this;do{if(t=!1,e=this._aIngItem=this._aQueue[this._nPtr],!e)return this._bPlaying=!1,void(e||this.fireEvent("end"));if(this._nPtr++,e instanceof Function)e.call(this),t=!0;else if(e instanceof this.constructor)t=this._waitMorph(e);else if("number"!=typeof e)if("label"!==e.action)if("goto"!==e.action)if("keyframe"!==e.action){if(s=this._aCompiledItem,i=this._nPausePassed){for(var a=0,h=s.length;h>a;a++)s[a].sTimingFunc="";s.allCSS=!1}else s=this._aCompiledItem=this._compileItem(e);0!==s.length?(t=s.duration<0,t?this._processItem(1,!0):(this._playAnimate(i),this._nPausePassed=0)):setTimeout(function(){o._flushQueue()},s.duration)}else{if(n=e.args.keyframe,i=this._nPausePassed,s=this._aCompiledItem=e.args,t=s.duration<0){this._processKeyframe(1,n);continue}this._playKeyframe(i,n),this._nPausePassed=0}else this._goto(e.args.label),t=!0;else{if(++e.args.loops>e.args.times){var r=this._getRepeatEndIndex(e.args.label,this._nPtr);e.args.loops=0,r>-1&&this._goto(r+1)}t=!0}else setTimeout(function(){o._flushQueue()},e)}while(t)},_playKeyframe:function(t,e){var n=this;this._nStart=(new Date).getTime()-t;var i=this._aCompiledItem,s=i.duration;!function o(){n._oRAF=n._requestAnimationFrame(function(){var t=n._nStart;if(null!==n._oRAF){n._oRAF=null;var i=Math.min(1,Math.max(0,((new Date).getTime()-t)/s));e.frame(i),1>i?o():(n.fireEvent("timerEnd"),n._flushQueue())}})}()},_processKeyframe:function(t,e){e.preprocess().frame(t)},_playAnimate:function(t){var e=this;this._nStart=(new Date).getTime()-t,this._nIng=2,t||this._processItem(0,!0,3,!0);var n=this._aCompiledItem;n.allCSS?this._nIng--:this._animationLoop(!0),function(){var t=e._processItem(1,!0,1).transitionCache;if(!t||0===n.duration)return void(0===--e._nIng&&e._flushQueue());var i=t.length,s=i?t[0]:null,o=function(n){for(var i,s=[];i=t.pop();)i.css(e._getCSSKey("transitionDuration"),"0.0001ms"),s.push(i);t=null,(window.requestAnimationFrame||window.setTimeout)(function(){for(;i=s.pop();)i.css(e._getCSSKey("transitionDuration"),"0"),i.css(e._getCSSKey("transitionProperty"),"none");s=null},0),e.fireEvent("transitionEnd"),0!==--e._nIng||n||e._requestAnimationFrame(function(){e._flushQueue()})};if(!s)return void o();var a=s.$value(),h=function(t){a.removeEventListener(e._sTransitionEnd,e._fpOnTransitionEnd,!0),e._fpOnTransitionEnd=null,o(t===!0)};e._fpOnTransitionEnd=function(t){h(t)},a.addEventListener(e._sTransitionEnd,e._fpOnTransitionEnd,!0)}()},_animationLoop:function(t){var e=this;this._oRAF=this._requestAnimationFrame(function(){var n=e._nStart,i=e._aCompiledItem.duration;if(null!==e._oRAF){e._oRAF=null;var s=Math.min(1,Math.max(0,((new Date).getTime()-n)/i));e._processItem(s,t,2),1>s?e._animationLoop():(e.fireEvent("timerEnd"),0===--e._nIng&&e._flushQueue())}})},_processItem:function(t,e,n,i){var s={normalPropsToPause:[],transitionCache:[]},o=s.normalPropsToPause,a=s.transitionCache,h=this._aCompiledItem,r=h.duration;0===r?r=1:0>r&&(r=0);var f,u,c,l,_,d,m=this._bHasTransformRenderBug;if(n=n||3,this.fireEvent("beforeProgress",{nRate:t})){for(var p,v,g=[],E=0;v=h[E];E++){f=v.oObj,u=v.welObj,c=v.oProps;var T=v.sTimingFunc;T&&1&n&&(u&&u.$value().clientHeight,"@transition"in c||i||("@transitionProperty"in c||u.css(this._getCSSKey("transitionProperty"),"all"),"@transitionDuration"in c||u.css(this._getCSSKey("transitionDuration"),(r/1e3).toFixed(3)+"s"),"@transitionTimingFunction"in c||u.css(this._getCSSKey("transitionTimingFunction"),T)),a.push(u)),p={},g.push(f,p),i&&1===t&&"@transform"in c&&/AppleWebKit\/534\.30/.test(navigator.userAgent)&&(u.css(this._getCSSKey("transform"),""),f.clientHeight);for(var I in c)if(c.hasOwnProperty(I)){if(l=c[I],d=/^@(.*)$/.test(I)&&RegExp.$1,_=T&&d?1:2,!(n&_))continue;if("function"==typeof l)l=l(t);else if(!e)continue;d?(/transition/.test(I)&&(l=this._getCSSVal(l)),m&&"@transform"===I&&("@left"in c||"@top"in c)&&f.clientHeight,u.css(this._getCSSKey(d),l)):i?o.push([f,I,l]):f[I]=l,p[I]=l}}return this.fireEvent("progress",{aLists:g,nRate:t}),s}},_compileItem:function(t){var e=0==t.length,n=[];n.duration=t.duration;for(var i,s,o,a,h,r,f,u,c=this.option("fEffect"),l=0,_=t.length;_>l;l+=2){var d=null;i=t[l],s=jindo.$Element(i),o=t[l+1],r={};var m=!1;for(var p in o)if(o.hasOwnProperty(p)){var v,g;if(h=o[p],f=/^@(.*)$/.test(p),u=RegExp.$1,h instanceof Array?(a=h[0],h=h[1]):a=f?s.css(this._getCSSKey(u)):i[p],a=0===a?a:a||"",v="function"==typeof h?h.effectConstructor:c,g=this._getEffectCSS(v)||"",/^@transform$/.test(p)){if("function"==typeof h&&(h=h.end),r[p]=this._getTransformFunction(a,h,v,i),jindo.m){var E=jindo.m.getOsInfo();(/matrix/.test(a)||/matrix/.test(h))&&E.android&&parseFloat(E.version)<3&&(g="")}}else if("function"==typeof h)"setStart"in h&&h.setStart(a),r[p]=h;else try{r[p]=v(a,h)}catch(T){if(!/^unit error/.test(T.message))throw T;r[p]=h}var I=r[p];if("function"==typeof I&&I(0)===I(1)){delete r[p];continue}f?null===d?d=g:d!==g&&(d=""):g="",e=e||!g,m=!0}s.visible()||(d=null,e=!0),m&&n.push({oObj:i,welObj:s,oProps:r,sTimingFunc:d})}return n.allCSS=!e,n},play:function(){return this._bPlaying||(this._bPlaying=!0,this.fireEvent("play"),this._flushQueue()),this},reset:function(){return this._goto(0)},pause:function(t){if(!this._bPlaying)return this;this._cancelAnimationFrame(this._oRAF),this._oRAF=null;var e=this._aCompiledItem,n=e.duration;if("undefined"==typeof t){var i=(new Date).getTime()-this._nStart;t=i/n}t=Math.max(0,Math.min(1,t));var s=null;if(e.keyframe?this._processKeyframe(t,e.keyframe):s=this._processItem(t,!0,3,!0).normalPropsToPause,this._nPtr--,this._nPausePassed=Math.round(n*t),this._fpOnTransitionEnd&&this._fpOnTransitionEnd(!0),s)for(var o=0,a=s.length;a>o;o++){var h=s[o];h[0][h[1]]=h[2]}return this._bPlaying=!1,this.fireEvent("pause"),this},_goto:function(t){var e=t;if("number"==typeof t)t=t||0;else if(t=this._getLabelIndex(e),-1===t)throw"Label not found";return this._nPtr=t,this._nPausePassed=0,this},isPlaying:function(){return this._bPlaying||!1},clear:function(){return this._aQueue.length=0,this._aRepeat.length=0,this._nPtr=0,this._nPausePassed=0,this},_getPointer:function(){return this._nPtr},_getEffectCSS:function(t){var e=this.option("bUseTransition")&&this._bTransitionSupport;if(!e)return null;if(this._htEventHandler.progress&&this._htEventHandler.progress.length||this._htEventHandler.beforeProgress&&this._htEventHandler.beforeProgress.length)return null;if(t.hasOwnProperty("toString"))return t.toString();switch(t){case jindo.m.Effect.linear:return"linear";case jindo.m.Effect.cubicEase:return"ease";case jindo.m.Effect.cubicEaseIn:return"ease-in";case jindo.m.Effect.cubicEaseOut:return"ease-out";case jindo.m.Effect.cubicEaseInOut:return"ease-in-out";default:if(t.cubicBezier&&Math.max.apply(Math,t.cubicBezier)<=1&&Math.min.apply(Math,t.cubicBezier)>=0)return"cubic-bezier("+t.cubicBezier.join(",")+")"}return null},_requestAnimationFrame:function(t){var e,n=this,i=function(){e===n._oLastRAF&&(n._oLastRAF=null,t())};return e=window.requestAnimationFrame?requestAnimationFrame(i):setTimeout(i,1e3/60),this._oLastRAF=e},_cancelAnimationFrame:function(t){var e;return e=window.cancelAnimationFrame?cancelAnimationFrame(t):clearTimeout(t),this._oLastRAF=null,e},_oProperPrefix:{},_getProperPrefix:function(t){var e=this._oProperPrefix;if(t in e)return e[t];for(var n,i,s=document.body.style,o=["webkit","","Moz","O","ms"],a=function(t){return t.toUpperCase()},h=0,r=o.length;r>h;h++)if(n=o[h],i=n+(n?t.replace(/^[a-z]/,a):t),i in s)return e[t]=n;return e[t]=""},_getCSSKey:function(t){var e=this,n="",i=t.replace(/^(\-(webkit|o|moz|ms)\-)?([a-z]+)/,function(t,i,s,o){return n=s||e._getProperPrefix(o),n&&(o=o.replace(/^[a-z]/,function(t){return t.toUpperCase()})),o}).replace(/\-(\w)/g,function(t,e){return e.toUpperCase()});return({o:"O",moz:"Moz",webkit:"Webkit"}[n]||n)+i},_getCSSVal:function(t){var e=this,n=t.replace(/(^|\s)(\-(webkit|moz|o|ms)\-)?([a-z]+)/g,function(t,n,i,s,o){return s=s||e._getProperPrefix(o),n+(s&&"-"+s+"-")+o});return n},_getMatrixObj:function(t,e){t=t.replace(/\b(translate(3d)?)\(\s*([^,]+)\s*,\s*([^,\)]+)/g,function(t,n,i,s,o){return/%$/.test(s)&&(s=parseFloat(s)/100*e.offsetWidth+"px"),/%$/.test(o)&&(o=parseFloat(o)/100*e.offsetHeight+"px"),n+"("+s+","+o}).replace(/\b(translate([XY]))\(\s*([^\)]+)/g,function(t,n,i,s){return"X"===i&&/%$/.test(s)?s=parseFloat(s)/100*e.offsetWidth+"px":"Y"===i&&/%$/.test(s)&&(s=parseFloat(s)/100*e.offsetHeight+"px"),n+"("+s});var n,i=window.WebKitCSSMatrix||window.MSCSSMatrix||window.OCSSMatrix||window.MozCSSMatrix||window.CSSMatrix;if(i)n=function(t){return new i(t).toString()};else{var s="M"+Math.round((new Date).getTime()*Math.random()),o=jindo.$Agent().navigator(),a=o.firefox?"moz":o.ie?"ms":"o",h="-"+a+"-transform",r=document.createElement("style");r.type="text/css";var f=document.getElementsByTagName("html")[0];f.insertBefore(r,f.firstChild);var u=r.sheet||r.styleSheet,c=document.createElement("div");c.id=s;var l=window.getComputedStyle(c,null);n=function(t){var e=null;return u.insertRule("#"+s+" { "+h+": "+t+" !important; }",0),document.body.insertBefore(c,document.body.firstChild),e=l.getPropertyValue(h),document.body.removeChild(c),u.deleteRule(0),e}}var _=n(t);return/^([^\(]+)\(([^\)]*)\)$/.test(_)?{key:RegExp.$1,val:RegExp.$2.replace(/\s*,\s*/g," ")}:{key:"matrix",val:"1 0 0 1 0 0"}},_convertMatrix3d:function(t){if("matrix3d"===t.key)return t;var e=t.val.split(" ");return t.key="matrix3d",e.splice(2,0,"0"),e.splice(3,0,"0"),e.splice(6,0,"0"),e.splice(7,0,"0"),e.splice(8,0,"0"),e.splice(9,0,"0"),e.splice(10,0,"1"),e.splice(11,0,"0"),e.splice(14,0,"0"),e.splice(15,0,"1"),t.val=e.join(" "),t},_parseTransformText:function(t){t=t||"";var e={};return t.replace(/([\w\-]+)\(([^\)]*)\)/g,function(t,n,i){var s=i.split(/\s*,\s*/);switch(n){case"translate3d":case"scale3d":case"skew3d":n=n.replace(/3d$/,""),e[n+"Z"]=s[2];case"translate":case"scale":case"skew":e[n+"X"]=s[0],"undefined"==typeof s[1]?"scale"===n&&(e[n+"Y"]=s[0]):e[n+"Y"]=s[1];break;default:e[n]=s.join(",")}}),e},_getTransformFunction:function(t,e,n,i){var s,o,a;if(/matrix/.test(t+e))return o=this._getMatrixObj(t,i),a=this._getMatrixObj(e,i),o.key!==a.key&&(o=this._convertMatrix3d(o),a=this._convertMatrix3d(a)),n=n(o.val,a.val),function(t){return 1===t?e:o.key+"("+n(t).replace(/ /g,",")+")"};o=this._parseTransformText(t),a=this._parseTransformText(e);var h={};for(s in o)o.hasOwnProperty(s)&&(h[s]=n(o[s],a[s]||(/^scale/.test(s)?1:0)));for(s in a)!a.hasOwnProperty(s)||s in o||(h[s]=n(o[s]||(/^scale/.test(s)?1:0),a[s]));var r=function(t){var e=[];for(var n in h)h.hasOwnProperty(n)&&e.push(n+"("+h[n](t)+")");return e.join(" ")};return r}}).extend(jindo.m.Component),jindo.m.Animation=jindo.$Class({$init:function(t){this.option({bUseH:!0,bHasOffsetBug:!1,fEffect:jindo.m.Effect.cubicEaseOut,bUseCss3d:jindo.m.useCss3d(),bUseTimingFunction:jindo.m.useTimingFunction()}),this.option(t||{}),this._initVar()},_initVar:function(){this.sCssPrefix=jindo.m.getCssPrefix(),this._htTans=this.option("bUseCss3d")?{open:"3d(",end:",0)"}:{open:"(",end:")"},this._oMorph=new jindo.m.Morph({fEffect:this.option("fEffect"),bUseTransition:this.option("bUseTimingFunction")}).attach({end:jindo.$Fn(function(t){this._oMorph.clear(),this.fireEvent("end",t)},this).bind()}),this._welTarget=null},setStyle:function(){},move:function(){},getTarget:function(t){return t?this._welTarget:this._welTarget.$value()},p:function(t){return jindo.m._toPrefixStr(t)},getTranslate:function(t,e){return"translate"+this._htTans.open+t+","+e+this._htTans.end},toCss:function(t){var e,n,i,s={};for(e in t)n=e,/^@/.test(e)&&(e.match(/^(@\w)/),i=RegExp.$1,/transition|transform/.test(n)?(n=""==this.sCssPrefix?e.replace(i,i.toLowerCase()):e.replace(i,i.toUpperCase()),n=n.replace("@",this.sCssPrefix)):n=n.replace("@","")),s[n]=t[e];return s},isPlaying:function(){return this._oMorph.isPlaying()},stop:function(t){"undefined"==typeof t&&(t=0),this._oMorph.pause(t).clear()},destroy:function(){this._oMorph.detachAll("end")}}).extend(jindo.m.UIComponent),jindo.m.LayerEffect=jindo.$Class({$init:function(t,e){this.option({nDuration:250,fEffect:jindo.m.Effect.linear,bActivateOnload:!0}),this._initVar(),!arguments[0]||"string"!=typeof arguments[0]&&1!=arguments[0].nodeType?this.option(arguments[0]||{}):(this.setLayer(t),this.option(e||{})),this._initTransition(),this.option("bActivateOnload")&&this.activate()},_htEffect:{expand:"jindo.m.ExpandEffect",contract:"jindo.m.ContractEffect",fade:"jindo.m.FadeEffect",pop:"jindo.m.PopEffect",slide:"jindo.m.SlideEffect",flip:"jindo.m.FlipEffect"},_initVar:function(){this._htEffectInstance={},this._htLayerInfo={},this._htWElement={},this._htCurrentTask={},this.bAndroid=jindo.m.getDeviceInfo().android,this.sClassHighligting="_effct_hide_highlighting_tmp"},_initTransition:function(){this._oMorph=new jindo.m.Morph({fEffect:this.option("fEffect")||(this.option("sEffect")?this._getEffect(this.option("sEffect")):null),bUseTransition:jindo.m.useTimingFunction()})},_getEffect:function(t){var e=jindo.m.Effect.cubicEaseInOut;switch(t){case"linear":e=jindo.m.Effect.linear;break;case"ease":e=jindo.m.Effect.cubicEase;break;case"ease-in":e=jindo.m.Effect.cubicEaseIn;break;case"ease-out":e=jindo.m.Effect.cubicEaseOut;break;case"ease-in-out":e=jindo.m.Effect.cubicEaseInOut}return e},_createEffect:function(sType){if(this._htEffect[sType]&&!this._htEffectInstance[sType]){try{this._htEffectInstance[sType]=eval("new "+this._htEffect[sType]+"()")}catch(e){}this._htEffectInstance[sType].setLayerInfo(this._htLayerInfo)}},_createFunc:function(){for(var t=["slide","pop","flip","fade","expand","contract"],e=0,n=t.length;n>e;e++)this[t[e]]=function(t){return function(e){var n=t;if("string"==typeof arguments[0]||1==arguments[0].nodeType){this.setLayer(arguments[0]);var i=arguments[2]||{};i.sDirection=arguments[1],this._run(n,i)}else this._run(n,e)}}(t[e])},isPlaying:function(){return this._oMorph.isPlaying()},_fireCustomEvent:function(t,e){return this.fireEvent(t,e)},_run:function(t,e){if(this._isAvailableEffect()){this._createEffect(t),"undefined"==typeof e&&(e={});var n=this._htEffectInstance[t],i=this.getLayer(),s="undefined"==typeof e.nDuration?this.option("nDuration"):parseInt(e.nDuration,10),o=n.getBeforeCommand(i,e),a=n.getCommand(i,e);if(this._htCurrentTask=e,this._htCurrentTask.elLayer=i,this._htCurrentTask.sTaskName=a.sTaskName,this._htCurrentTask.nDuration=s,this._fireCustomEvent("beforeEffect",{elLayer:i,sEffect:a.sTaskName,nDuration:s})){o&&this._oMorph.pushAnimate(-1,[this.getLayer(),o.htStyle]);var h=this;e.sEffect&&this._oMorph.pushCall(function(){this.option({fEffect:h._getEffect(e.sEffect)})}),s=0==s?-1:s,this._oMorph.pushAnimate(s,[this.getLayer(),a.htStyle]),a.fCallback&&("function"==typeof a.fCallback?this._oMorph.pushCall(function(){a.fCallback()}):"object"==typeof a.fCallback&&this._oMorph.pushAnimate(-1,[this.getLayer(),a.fCallback.htStyle||{}])),this._oMorph.play()}}},setLayer:function(t){this._htWElement.el=jindo.$(t),this._htWElement.wel=jindo.$Element(this._htWElement.el);var e;if(this.bAndroid&&(e=jindo.$$.getSingle("."+this.sClassHighligting,this._htWElement.el),!e)){var n='<a href="javascript:void(0)" style="position:absolute" class="'+this.sClassHighligting+'"></a>';e=jindo.$(n),this._htWElement.wel.append(e),e.style.opacity="0",e.style.width=0,e.style.height=0,e.style.left="-1000px",e.style.top="-1000px"}this.setSize()},stop:function(t){"undefined"==typeof t&&(t=!0),this._oMorph&&this._oMorph.pause(t)},clearEffect:function(t){this._oMorph&&(this.stop(t),this._oMorph.clear())},getLayer:function(){return this._htWElement.el},setSize:function(){var t=this._htWElement.el.cloneNode(!0),e=jindo.$Element(t);e.opacity(0),this._htWElement.wel.after(e),e.show(),this._htLayerInfo.nWidth=this._htWElement.wel.width(),this._htLayerInfo.nHeight=this._htWElement.wel.height(),e.css({position:"absolute",top:"0px",left:"0px"}),this._htLayerInfo.nMarginLeft=parseInt(e.css("marginLeft"),10),this._htLayerInfo.nMarginTop=parseInt(e.css("marginTop"),10),this._htLayerInfo.nMarginLeft=isNaN(this._htLayerInfo.nMarginLeft)?0:this._htLayerInfo.nMarginLeft,this._htLayerInfo.nMarginTop=isNaN(this._htLayerInfo.nMarginTop)?0:this._htLayerInfo.nMarginTop,this._htLayerInfo.nOpacity=this._htWElement.wel.opacity(),this._htLayerInfo.sPosition=this._htWElement.wel.css("position");var n=this._htWElement.wel.css("display");n="none"===n||0===n.length?"block":n,this._htLayerInfo.sDisplay=n,this._htLayerInfo.sClassHighligting=this.sClassHighligting,e.leave(),this._setEffectLayerInfo()},_setEffectLayerInfo:function(){for(var t in this._htEffectInstance)this._htEffectInstance[t].setLayerInfo(this._htLayerInfo)},_onTransitionEnd:function(){this._htCurrentTask&&this._fireCustomEvent("afterEffect",{elLayer:this._htCurrentTask.elLayer,sEffect:this._htCurrentTask.sTaskName,nDuration:this._htCurrentTask.nDuration})},_onTransitionStop:function(t){t.sTaskName&&this._fireCustomEvent("stop",{elLayer:this._htCurrentTask.elLayer,sEffect:this._htCurrentTask.sTaskName,nDuration:this._htCurrentTask.nDuration})},_isAvailableEffect:function(){return this.isActivating()},_onActivate:function(){this._attachEvent(),this._createFunc()},_onDeactivate:function(){this._detachEvent()},_attachEvent:function(){this._htEvent={},this._htEvent.end=jindo.$Fn(this._onTransitionEnd,this).bind(),this._htEvent.stop=jindo.$Fn(this._onTransitionStop,this).bind(),this._oMorph&&this._oMorph.attach({end:this._htEvent.end,stop:this._htEvent.stop})},_detachEvent:function(){this._htEvent=null},destroy:function(){this.deactivate();for(var t in this._htWElement)this._htWElement[t]=null;this._htWElement=null}}).extend(jindo.m.UIComponent),jindo.m._Effect_=jindo.$Class({$init:function(){this._sCssPrefix=jindo.m.getCssPrefix();var t=jindo.m.getDeviceInfo();this.bIos=t.iphone||t.ipad,this.bIos3=t.iphone&&t.version.length>0&&"3"==t.version.substring(0,1),this.bAndroid=t.android,this.bAndroid3Up=t.android&&t.version.length>0&&t.version.substring(0,1)>="3",this.bAndroid2_1=t.android&&t.version.length>0&&"2.1"===t.version,this.sTranOpen=this.bIos?"translate3d(":"translate(",this.sTranEnd=this.bIos?",0px)":")",this._initVar()},_initVar:function(){this._htLayerInfo={}},setLayerInfo:function(t){this._htLayerInfo={};for(var e in t)this._htLayerInfo[e]=t[e]},getTranslateStyle:function(t,e){var n=e||{};for(var i in t)n["@"+i]=t[i];return n},getTransitionTask:function(){return null},getBeforeCommand:function(){return null},getCommand:function(){return null}}),jindo.m.SlideEffect=jindo.$Class({sEffectName:"slide",getCommand:function(t,e){e.nDistance&&(e.nSize=e.nDistance);var n,i,s,o=e.sDirection?e.sDirection:"left",a=jindo.m.getCssOffset(t),h=a.left,r=a.top;if(n="undefined"!=typeof e.nSize?e.nSize:this._htLayerInfo.nWidth,i="undefined"!=typeof e.nSize?e.nSize:this._htLayerInfo.nHeight,("up"==o||"down"==o)&&(r+="up"==o?-1*i:i),("left"==o||"right"==o)&&(h+="left"==o?-1*n:n),"undefined"!=typeof e.elBaseLayer){h=0,r=0;var f=jindo.$Element(e.elBaseLayer);s=jindo.$Element(t),i="undefined"!=typeof e.nSize?e.nSize:f.height(),n="undefined"!=typeof e.nSize?e.nSize:f.width(),("up"==o||"down"==o)&&(r="down"==o?-1*i:i),("left"==o||"right"==o)&&(h="left"==o?n:-1*n),h=-1*h,r=-1*r}var u=this._htLayerInfo.sPosition,c=this.bAndroid,l=this.bAndroid3Up,_=this._htLayerInfo.sClassHighligting,d=this.bAndroid2_1;s=jindo.$Element(t);var m=e.htTo||{};m.transform=this.sTranOpen+h+"px, "+r+"px"+this.sTranEnd;var p={};return this.getTranslateStyle(m,p),{sTaskName:this.sEffectName+"-"+o,htStyle:p,fCallback:function(){var e=jindo.m.getCssOffset(t),n=1*s.css("top").replace("px",""),i=1*s.css("left").replace("px","");n=isNaN(n)?0:n,i=isNaN(i)?0:i,"relative"==u?s.css("position","relative"):s.css("position","absolute");var o=jindo.m.getCssPrefix();if(s.css(o+"Transform",""),l&&s.offset(),s.$value().style.top=parseInt(n+e.top,10)+"px",s.$value().style.left=parseInt(e.left+i,10)+"px",c&&!l){var a=jindo.$$.getSingle("."+_,s.$value());a&&(d?setTimeout(function(){a.focus()},5):a.focus())}}}},getBeforeCommand:function(t,e){var n=e.sDirection?e.sDirection:"left",i=e.htFrom||{},s=jindo.$Element(t);if("undefined"!=typeof e.elBaseLayer){var o=jindo.$Element(e.elBaseLayer);if(!o.isParentOf(s)){o.append(s);var a=s.css("position");"relative"!=a&&"absolute"!=a&&s.css("position","absolute"),s.css("opacity",0)}var h=0,r=0,f=o.height(),u=o.width();("up"==n||"down"==n)&&(r="down"==n?-1*f:f),("left"==n||"right"==n)&&(h="left"==n?u:-1*u),o.css("overflow","hidden"),i.left=h+"px",i.top=r+"px",i.opacity=this._htLayerInfo.nOpacity}var c={};return this.getTranslateStyle(i,c),{htStyle:c}}}).extend(jindo.m._Effect_),jindo.m.CoreTab=jindo.$Class({$init:function(t,e){this.option({sClassPrefix:"tc-",nDefaultIndex:0,nPanelDuration:0,nHeight:0,nWidth:0,bActivateOnload:!0}),this.option(e||{}),this._initVar(),this._setWrapperElement(t)},_initVar:function(){this._sPrefix=this.option("sClassPrefix"),this._nCurrentIndex=-1,this._aTab=[],this._aPanel=[],this._oPanelEffect=null},_setWrapperElement:function(t){this._htWElement={},t="string"==typeof t?jindo.$(t):t,t&&(this._htWElement.baseElement=jindo.$Element(t),this._htWElement.tab_container=jindo.$Element(this._htWElement.baseElement.query("."+this._sPrefix+"tab-cont")),this._htWElement.panel_container=jindo.$Element(this._htWElement.baseElement.query("."+this._sPrefix+"panel-cont")),this._htWElement.tab_container&&this._htWElement.tab_container.css("-"+jindo.m.getCssPrefix()+"-tap-highlight-color","transparent"))},_initData:function(){var t,e,n,i,s=this.option("nPanelDuration");for(this._aTab=this._htWElement.tab_container.queryAll("."+this._sPrefix+"tab"),this._aPanel=this._htWElement.panel_container.queryAll("."+this._sPrefix+"panel"),n=0,i=this._aTab.length;i>n;n++)this._aTab[n]=jindo.$Element(this._aTab[n]),this._aPanel[n]=jindo.$Element(this._aPanel[n]);for(s&&(t=(0==this.option("nWidth")?this._htWElement.panel_container.width()-parseInt(this._aPanel[0].css("paddingLeft"),10)-parseInt(this._aPanel[0].css("paddingRight"),10):this.option("nWidth"))+"px",e=this.option("nHeight")+"px"),n=0,i=this._aTab.length;i>n;n++)this._aTab[n]=this._aTab[n].attr("data-index",n),s&&this._aPanel[n].css({width:t,height:e,position:"absolute"});s&&(this._oPanelEffect=new jindo.m.LayerEffect(this._aPanel[0].$value()),this._htWElement.panel_container.css({position:"relative",overflow:"hidde",height:e}))},_getIdx:function(t){return parseInt(t.attr("data-index"),10)},_getTabElement:function(t){var e=this._sPrefix+"tab",n=this._sPrefix+"more-tab";return t.hasClass(e)||t.hasClass(n)?t:!this._htWElement.tab_container.isParentOf(t)||t.hasClass(e)&&t.hasClass(n)?t:t.parent(function(t){return t.hasClass(e)||t.hasClass(n)},2)[0]},_onActivate:function(){this._attachEvent()},_onDeactivate:function(){this._detachEvent()},_attachEvent:function(){this._htEvent={},this._htEvent.tab_click={el:this._htWElement.tab_container,ref:jindo.$Fn(this._onSelect,this).attach(this._htWElement.tab_container,"click")}},_detachEvent:function(){for(var t in this._htEvent){var e=this._htEvent[t];e.ref.detach(e.el,t.substring(t.lastIndexOf("_")+1))}this._htEvent=null,this._oPanelEffect&&this._oPanelEffect.detachAll()},getCurrentIndex:function(){return this._nCurrentIndex},getTab:function(t){return null!==t&&this._aTab.length>t?this._aTab[t]:this._aTab},getPanel:function(t){return null!==t&&this._aPanel.length>t?this._aPanel[t]:this._aPanel},_onSelect:function(t){if(t.element){if(this._oPanelEffect&&this._oPanelEffect.isPlaying())return t.stop(jindo.$Event.CANCEL_ALL),!1;var e=this._getTabElement(jindo.$Element(t.element));this._onAfterSelect(e)}},select:function(t){if(null!==t&&t>=0&&this._aTab.length>t&&this._nCurrentIndex!=t&&this._fireEventBefore("beforeSelect")){var e=this._sPrefix+"selected";this._beforeSelect(t),this._aTab[t].addClass(e),this._aPanel[t].addClass(e),this._aPanel[t].show(),this._nCurrentIndex>-1&&(this._aTab[this._nCurrentIndex].removeClass(e),this._oPanelEffect?this._slide(this._nCurrentIndex,t):(this._aPanel[this._nCurrentIndex].removeClass(e),this._aPanel[this._nCurrentIndex].hide())),this._nCurrentIndex=t,this._fireEvent("select")}},_slide:function(t,e){var n=this,i=e>t,s=this._aPanel[e].width();this._fireEventBefore("beforeSlide")&&(this._oPanelEffect.setLayer(this._aPanel[e].$value()),this._oPanelEffect.attach("afterEffect",function(){n._onPannelAfterEffct(t,e)}),this._aPanel[e].css({left:i?s:-s,zIndex:9}),this._oPanelEffect.slide({sDirection:i?"left":"right",nDuration:this.option("nPanelDuration"),nSize:s}))},_onPannelAfterEffct:function(t,e){this._aPanel[t].removeClass(this._sPrefix+"selected"),this._aPanel[t].hide(),this._aPanel[t].css("zIndex",1),this._aPanel[e].css("zIndex",2),this._oPanelEffect.detachAll("afterEffect"),this._fireEvent("slide")},_fireEventBefore:function(t){return this.fireEvent(t,{nIndex:this._nCurrentIndex,elTab:this._aTab[this._nCurrentIndex],elPanel:this._aPanel[this._nCurrentIndex]})},_fireEvent:function(t){this.fireEvent(t,{nIndex:this._nCurrentIndex,elTab:this._aTab[this._nCurrentIndex],elPanel:this._aPanel[this._nCurrentIndex]})},destroy:function(){for(var t in this._htWElement)this._htWElement[t]=null;this._htWElement=null;for(t in this._aTab)this._aTab[t]=null;this._aTab=null;for(t in this._aPanel)this._aPanel[t]=null;this._aPanel=null,this._oPanelEffect&&(this._oPanelEffect.destroy(),this._oPanelEffect=null)}}).extend(jindo.m.UIComponent),jindo.m.Cover=jindo.$Class({$init:function(t){this.option({nDefaultScale:.94}),this.option(t||{}),this._welZoom=null},setStyle:function(t){var e={position:"absolute",width:"100%",height:"100%",left:"0px",top:"0px",zIndex:1,opacity:.2,display:"none"},n={};n[this.p("TransitionProperty")]=""==this.sCssPrefix?"tranform":"-"+this.sCssPrefix+"-transform",n[this.p("Transform")]=this.getTranslate(0,0),e=jindo.$Jindo.mixin(e,n),jindo.$A(t[0]).forEach(function(t){t.css(e)}),this.fireEvent("set",{css:n})},move:function(t,e,n,i){this.option("bUseH")?t=this._getPos(t,i):e=this._getPos(e,i);var s=this.getTarget(!0),o={"@transitionProperty":""==this.sCssPrefix?"tranform":"-"+this.sCssPrefix+"-transform","@transform":this.getTranslate(t+"px",e+"px")};if(n){var a=[s,o];this._welZoom&&(a.push(this._welZoom),a.push(this.getZoomCss(this.option("bUseH")?t:e,i))),this._oMorph.pushAnimate(n,a)}else s.css(this.toCss(o)),this._welZoom&&this._welZoom.css(this.toCss(this.getZoomCss(this.option("bUseH")?t:e,i)));return this._oMorph},getZoomCss:function(t,e){var n=e.range,i=e.next?(n-t)/n-1:1-(n-t)/n,s=this.option("nDefaultScale"),o={};s+=i*(1-s);var a=" scale"+this._htTans.open+s+", "+s+(this.option("bUseCss3d")?", 0.1)":this._htTans.end);return o["@opacity"]=i,o["@transitionProperty"]=""==this.sCssPrefix?"tranform":"-"+this.sCssPrefix+"-transform",o["@transform"]=this.getTranslate(0,0)+a,o},change:function(t,e,n){var i={zIndex:1,opacity:.2,display:"block"};i[this.p("TransitionProperty")]=""==this.sCssPrefix?"tranform":"-"+this.sCssPrefix+"-transform",this._changeZoom(e,i,n),this._changeTarget(t,i)},_changeTarget:function(t,e){this._welTarget&&this._welTarget.isEqual(t)||(this._welTarget&&this._welTarget.hide(),e.zIndex=10,e.opacity=1,e[this.p("Transform")]=this.getTranslate(0,0),this._welTarget=t.css(e))},_changeZoom:function(t,e){this._welZoom&&this._welZoom.isEqual(t)||(this._welZoom&&this._welZoom.hide(),t?(e.zIndex=1,e.opacity=.2,e[this.p("Transform")]=this.getTranslate(0,0)+" scale"+this._htTans.open+this.option("nDefaultScale")+","+this.option("nDefaultScale")+this._htTans.end,this._welZoom=t.css(e)):this._welZoom=null)},_getPos:function(t,e){var n=t,i=e.range,s=e.next;return e.restore?n=0:(n%=i,0===n?n+=s?-i:i:0>t&&(n+=s?0:i)),n}}).extend(jindo.m.Animation),jindo.m.Touch=jindo.$Class({$init:function(t,e){this._el=jindo.$Element(t).$value();var n={nMomentumDuration:350,nMoveThreshold:7,nSlopeThreshold:25,nLongTapDuration:1e3,nDoubleTapDuration:400,nTapThreshold:6,nPinchThreshold:.1,nRotateThreshold:5,bActivateOnload:!0,bUseAutoDirection:!1,nUseDiagonal:0,bVertical:!0,bHorizental:!1};this.option(n),this.option(e||{}),this.option("nUseDiagonal")>0&&this.option({bVertical:!0,bHorizental:!0}),this._initVariable(),this._initTouchEventName(),this._initPreventSystemEvent(),this._setSlope(),this.option("bActivateOnload")&&this.activate()},$static:{MOVETYPE:{0:"hScroll",1:"vScroll",2:"dScroll",3:"tap",4:"longTap",5:"doubleTap",6:"pinch",7:"rotate",8:"pinch-rotate"}},_initTouchEventName:function(){"ontouchstart"in window?(this._htEventName.start="touchstart",this._htEventName.move="touchmove",this._htEventName.end="touchend",this._htEventName.cancel="touchcancel",this._hasTouchEvent=!0):window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0&&(this._htEventName.start="MSPointerDown",this._htEventName.move="MSPointerMove",this._htEventName.end="MSPointerUp",this._htEventName.cancel="MSPointerCancel",this._hasTouchEvent=!1)},_initPreventSystemEvent:function(){if(this._el.style&&"undefined"!=typeof this._el.style.msTouchAction){var t="none";this.option("bHorizental")&&!this.option("bVertical")&&(t="pan-x"),this.option("bVertical")&&!this.option("bHorizental")&&(t="pan-y"),this._el.style.msTouchAction=t}},_initVariable:function(){this._htEventName={start:"mousedown",move:"mousemove",end:"mouseup",cancel:null},this._hasTouchEvent=!1,this._radianToDegree=180/Math.PI,this._htMoveInfo={nStartX:0,nStartY:0,nBeforeX:0,nBeforeY:0,nStartTime:0,nBeforeTime:0,nStartDistance:0,nBeforeDistance:0,nStartAngle:0,nLastAngle:0,nBeforeScale:0,aPos:[]},this.htEndInfo={nX:0,nY:0},this.nStart=0,this.bMove=!1,this.nMoveType=-1,this._nStartMoveType=-1,this._nVSlope=0,this._nHSlope=0,this.bSetSlope=!1,this._nTouchEndTimer=null},_attachEvents:function(){this._htEvent={};this._hasTouchEvent;this._htEvent[this._htEventName.start]={fn:jindo.$Fn(this._onStart,this).bind(),el:this._el},this._htEvent[this._htEventName.move]={fn:jindo.$Fn(this._onMove,this).bind(),el:this._el},this._htEvent[this._htEventName.end]={fn:jindo.$Fn(this._onEnd,this).bind(),el:this._el},this._htEvent.rotate=jindo.$Fn(this._onResize,this).bind(),jindo.m.bindRotate(this._htEvent.rotate),this._htEventName.cancel&&(this._htEvent[this._htEventName.cancel]={fn:jindo.$Fn(this._onCancel,this).bind(),el:this._el});for(var t in this._htEvent)this._htEvent[t].fn&&(this._htEvent[t].ref=this._attachFakeJindo(this._htEvent[t].el,this._htEvent[t].fn,t))},_attachFakeJindo:function(t,e,n){var i=(jindo.$Jindo.VERSION||jindo.$Jindo().version||jindo.VERSION).replace(/[a-z.]/gi,""),s=null;return s=230>i&&"undefined"!=typeof _notSupport?_notSupport.$Fn(e).attach(t,n):jindo.$Fn(e).attach(t,n)},_detachEvents:function(){for(var t in this._htEvent){var e=this._htEvent[t];e.ref&&e.ref.detach(e.el,t)}jindo.m.unbindRotate(this._htEvent.rotate),this._htEvent=null},_onCancel:function(t){this._onEnd(t)},_onStart:function(t){var e=this._getTouchInfo(t);if(this.nStart=e.length,!(e.length>1)){this.bMove&&this._resetTouchInfo();var n={element:e[0].el,nX:e[0].nX,nY:e[0].nY,oEvent:t};this._fireCustomEvent("touchStart",n)&&(this._updateTouchInfo(e,"start"),this._startLongTapTimer(e,t))}},_onMove:function(t){if(!(this.nStart<=0)){this.bMove=!0;var e=this._getTouchInfo(t);if(1===e.length){if(this.nMoveType<0||3==this.nMoveType||4==this.nMoveType){var n=this._getMoveType(e);(4!=this.nMoveType||3!=n)&&(2!=this.option("nUseDiagonal")||0!=n&&1!=n?this.nMoveType=this._nStartMoveType=n:(this._nStartMoveType=n,this.nMoveType=2))}}else 8!==this.nMoveType&&(this.nMoveType=this._nStartMoveType=this._getMoveType(e));var i=this._getCustomEventParam(e,!1,t);
3!=this.nMoveType&&this._deleteLongTapTimer();var s=0;if(s=Math.abs(0==this.nMoveType?i.nDistanceX:1==this.nMoveType?i.nDistanceY:Math.sqrt(Math.pow(i.nDistanceX,2)+Math.pow(i.nDistanceY,2))),!(s<this.option("nMoveThreshold")||s<this.option("nSlopeThreshold"))||!(this.nMoveType<0||this.nMoveType>2)){this._updateTouchInfo(e,"move"),i.sMoveTypeAgree=!1;var o=i.sMoveType,a=(Math.abs(i.nVectorX),this.option("bHorizental")&&o==jindo.m.Touch.MOVETYPE[0]),h=this.option("bVertical")&&o==jindo.m.Touch.MOVETYPE[1],r=1==this.option("nUseDiagonal")&&o==jindo.m.Touch.MOVETYPE[2],f=2==this.option("nUseDiagonal");return(a||h||r||f)&&(i.sMoveTypeAgree=!0),this.fireEvent("touchMove",i)?void 0:void(this.nStart=0)}}},_onEnd:function(t){var e=this._getTouchInfo(t);this.nStart-=e.length;var n=this;if(this.nStart>0)return clearTimeout(this._nTouchEndTimer),void(this._nTouchEndTimer=setTimeout(function(){n._onEnd(t)},500));this._deleteLongTapTimer(),this.bMove||4==this.nMoveType||(this.nMoveType=3),this._isDblTap(e[0].nX,e[0].nY,e[0].nTime)&&(clearTimeout(this._nTapTimer),this._nTapTimer=-1,this.nMoveType=5),this._updateTouchInfo(e,"end");var i=this._getCustomEventParam(e,!0,t),s=i.sMoveType;"undefined"!=typeof this._htEventHandler[jindo.m.Touch.MOVETYPE[5]]&&this._htEventHandler[jindo.m.Touch.MOVETYPE[5]].length>0&&3==this.nMoveType?this._nTapTimer=setTimeout(function(){n._fireCustomEvent(s,i),n.fireEvent("touchEnd",i),delete n._nTapTimer},this.option("nDoubleTapDuration")):(this.fireEvent("touchEnd",i),4!=this.nMoveType&&(8===this.nMoveType?(i.sMoveType=jindo.m.Touch.MOVETYPE[6],this._fireCustomEvent(jindo.m.Touch.MOVETYPE[6],i),i.sMoveType=jindo.m.Touch.MOVETYPE[7],this._fireCustomEvent(jindo.m.Touch.MOVETYPE[7],i)):setTimeout(function(){n._fireCustomEvent(s,i)},0))),this._updateTouchEndInfo(e),this._resetTouchInfo()},_fireCustomEvent:function(t,e){return this.fireEvent(t,e)},_getCustomEventParam:function(t,e,n){var i;i=this._htMoveInfo.aPos.length>0?this._htMoveInfo.aPos[this._htMoveInfo.aPos.length>0&&!e?this._htMoveInfo.aPos.length-1:0]:{nX:this._htMoveInfo.nBeforeX,nY:this._htMoveInfo.nBeforeY,nTime:this._htMoveInfo.nBeforeTime};var s=jindo.m.Touch.MOVETYPE[this.nMoveType],o=jindo.m.Touch.MOVETYPE[this._nStartMoveType],a=t[0].nTime-this._htMoveInfo.nStartTime,h=0,r=0,f=0,u=0,c=0,l=0,_=0,d=0,m=1===this.nMoveType?0:t[0].nX-this._htMoveInfo.nStartX,p=0===this.nMoveType?0:t[0].nY-this._htMoveInfo.nStartY,v=1===this.nMoveType?0:t[0].nX-i.nX,g=0===this.nMoveType?0:t[0].nY-i.nY,E=t[0].nTime-i.nTime,T={element:t[0].el,nX:t[0].nX,nY:t[0].nY,nVectorX:t[0].nX-this._htMoveInfo.nBeforeX,nVectorY:t[0].nY-this._htMoveInfo.nBeforeY,nDistanceX:m,nDistanceY:p,sMoveType:s,sStartMoveType:o,nStartX:this._htMoveInfo.nStartX,nStartY:this._htMoveInfo.nStartY,nStartTimeStamp:this._htMoveInfo.nStartTime,htMomentum:{nDistanceX:v,nDistanceY:g,nDuration:E},oEvent:n||{}};if((t.length>1||this.nMoveType>=6)&&(T.nScale=this._getScale(t),T.nRotation=this._getRotation(t),null===T.nScale&&(T.nScale=this._htMoveInfo.nBeforeScale),null===T.nRotation&&(T.nRotation=this._htMoveInfo.nBeforeRotation)),t.length>=1){T.aX=[],T.aY=[],T.aElement=[];for(var I=0,b=t.length;b>I;I++)T.aX.push(t[I].nX),T.aY.push(t[I].nY),T.aElement.push(t[I].el)}return e&&((0==this.nMoveType||1==this.nMoveType||2==this.nMoveType)&&(a<=this.option("nMomentumDuration")&&(f=Math.abs(m)/a,h=f*f/2,u=Math.abs(p)/a,r=u*u/2),E<=this.option("nMomentumDuration")&&(_=Math.abs(v)/E,c=_*_/2,d=Math.abs(g)/E,l=d*d/2)),T.nMomentumX=h,T.nMomentumY=r,T.nSpeedX=f,T.nSpeedY=u,T.nDuration=a,T.htMomentum.nMomentumX=c,T.htMomentum.nMomentumY=l,T.htMomentum.nSpeedX=_,T.htMomentum.nSpeedY=d),T},_updateTouchEndInfo:function(t){this.htEndInfo={element:t[0].el,time:t[0].nTime,movetype:this.nMoveType,nX:t[0].nX,nY:t[0].nY}},_deleteLongTapTimer:function(){"undefined"!=typeof this._nLongTapTimer&&(clearTimeout(this._nLongTapTimer),delete this._nLongTapTimer)},_startLongTapTimer:function(t,e){var n=this;"undefined"!=typeof this._htEventHandler[jindo.m.Touch.MOVETYPE[4]]&&this._htEventHandler[jindo.m.Touch.MOVETYPE[4]].length>0&&(n._nLongTapTimer=setTimeout(function(){n.fireEvent("longTap",{element:t[0].el,oEvent:e,nX:t[0].nX,nY:t[0].nY}),n.nMoveType=4},n.option("nLongTapDuration")))},_onResize:function(){this._setSlope()},_isDblTap:function(t,e){if("undefined"!=typeof this._nTapTimer&&3==this.nMoveType){var n=this.option("nTapThreshold");if(Math.abs(this.htEndInfo.nX-t)<=n&&Math.abs(this.htEndInfo.nY-e)<=n)return!0}return!1},_setSlope:function(){this.bSetSlope||(this._nHSlope=1*(window.innerHeight/2/window.innerWidth).toFixed(2),this._nVSlope=1*(window.innerHeight/(window.innerWidth/2)).toFixed(2))},setSlope:function(t,e){this._nHSlope=e,this._nVSlope=t,this.bSetSlope=!0},getSlope:function(){return{nVSlope:this._nVSlope,nHSlope:this._nHSlope}},_resetTouchInfo:function(){for(var t in this._htMoveInfo)"aPos"!=t?this._htMoveInfo[t]=0:this._htMoveInfo.aPos.length=0;this._deleteLongTapTimer(),this.nStart=0,this.bMove=!1,this.nMoveType=-1,this._nStartMoveType=-1},_updateTouchInfo:function(t,e){"end"==e?(this.htEndInfo={nX:t[0].nX,nY:t[0].nY},this._htMoveInfo.aPos.length>3&&this._htMoveInfo.aPos.pop()):("start"==e?(this._htMoveInfo.nStartX=t[0].nX,this._htMoveInfo.nStartY=t[0].nY,this._htMoveInfo.nStartTime=t[0].nTime):this._htMoveInfo.nBeforeTime=t[0].nTime,this._htMoveInfo.nBeforeX=t[0].nX,this._htMoveInfo.nBeforeY=t[0].nY,this._htMoveInfo.aPos.push({nX:t[0].nX,nY:t[0].nY,nTime:t[0].nTime}),this._htMoveInfo.aPos.length>5&&this._htMoveInfo.aPos.shift())},_getMoveTypeBySingle:function(t,e){var n=this.nMoveType,i=Math.abs(this._htMoveInfo.nStartX-t),s=Math.abs(this._htMoveInfo.nStartY-e),o=i+s,a=this.option("nTapThreshold");if(n=a>=i&&a>=s?3:-1,this.option("nSlopeThreshold")<=o){var h=parseFloat((s/i).toFixed(2),10);n=-1===this._nHSlope&&-1===this._nVSlope&&this.option("nUseDiagonal")>0?2:h<=this._nHSlope?0:h>=this._nVSlope?1:this.option("nUseDiagonal")>1?2:2}return n},_getMoveTypeByMulti:function(){var t=-1;return(6===this.nMoveType||Math.abs(1-this._htMoveInfo.nBeforeScale)>=this.option("nPinchThreshold"))&&(t=6),(7===this.nMoveType||Math.abs(0-this._htMoveInfo.nBeforeRotation)>=this.option("nRotateThreshold"))&&(t=6===t?8:7),-1===t?this.nMoveType:t},_getScale:function(t){var e=-1,n=this._getDistance(t);return 0>=n?null:(0===this._htMoveInfo.nStartDistance?(e=1,this._htMoveInfo.nStartDistance=n):e=n/this._htMoveInfo.nStartDistance,this._htMoveInfo.nBeforeScale=e,e)},_getRotation:function(t){var e=-1,n=this._getAngle(t);return null===n?null:(0===this._htMoveInfo.nStartAngle?(this._htMoveInfo.nStartAngle=n,e=0):e=n-this._htMoveInfo.nStartAngle,this._htMoveInfo.nLastAngle=n,this._htMoveInfo.nBeforeRotation=e,e)},_getMoveType:function(t){var e=this.nMoveType;return 1===t.length?e=this._getMoveTypeBySingle(t[0].nX,t[0].nY):2===t.length&&(e=this._getMoveTypeByMulti(t)),e},_getDistance:function(t){return 1===t.length?-1:Math.sqrt(Math.pow(Math.abs(t[0].nX-t[1].nX),2)+Math.pow(Math.abs(t[0].nY-t[1].nY),2))},_getAngle:function(t){if(1===t.length)return null;var e=t[0].nX-t[1].nX,n=t[0].nY-t[1].nY,i=Math.atan2(n,e)*this._radianToDegree;if(null!==this._htMoveInfo.nLastAngle){var s=Math.abs(this._htMoveInfo.nLastAngle-i),o=i+360,a=i-360;Math.abs(o-this._htMoveInfo.nLastAngle)<s?i=o:Math.abs(a-this._htMoveInfo.nLastAngle)<s&&(i=a)}return i},_getTouchInfo:function(t){var e=[],n=t.$value().timeStamp,i=null;if(this._hasTouchEvent){i=t.$value().touches,i=i.length>1?i:t.$value().changedTouches;for(var s=0,o=i.length;o>s;s++)e.push({el:jindo.m.getNodeElement(i[s].target),nX:i[s].pageX,nY:i[s].pageY,nTime:n})}else e.push({el:t.element,nX:t.pos().pageX,nY:t.pos().pageY,nTime:n});return e},getBaseElement:function(){return this._el},_onDeactivate:function(){this._detachEvents()},_onActivate:function(){this._attachEvents()},destroy:function(){var t;this.deactivate(),this._el=null;for(t in this._htMoveInfo)this._htMoveInfo[t]=null;this._htMoveInfo=null;for(t in this.htEndInfo)this.htEndInfo[t]=null;this.htEndInfo=null,this.nStart=0,this.bMove=null,this.nMoveType=null,this._nStartMoveType=null,this._nVSlope=null,this._nHSlope=null,this.bSetSlope=null}}).extend(jindo.m.UIComponent),jindo.m.SwipeCommon=jindo.$Class({$init:function(){this.option({bActivateOnload:!0,bUseHighlight:!0,bUseDiagonalTouch:!0,bUseMomentum:!0,nDeceleration:6e-4,bAutoResize:!0,fEffect:jindo.m.Effect.cubicEaseOut,bUseCss3d:jindo.m.useCss3d(),bUseTimingFunction:jindo.m.useTimingFunction(),nZIndex:2e3})},_getAnimationOption:function(t){return jindo.$Jindo.mixin({bUseH:this._bUseH,bHasOffsetBug:this._hasOffsetBug(),fEffect:this.option("fEffect"),bUseCss3d:this.option("bUseCss3d"),bUseTimingFunction:this.option("bUseTimingFunction")},t||{})},_initVar:function(){this._htWElement={},this._bUseH=!1,this._bUseV=!1,this._nX=0,this._nY=0,this._bUseDiagonalTouch=this.option("bUseDiagonalTouch"),this._bClickBug=jindo.m.hasClickBug(),this._htOffsetBug={hasBug:jindo.m.hasOffsetBug()&&this.option("bUseHighlight"),timer:-1,elDummyTag:null},this._htSize={viewWidth:0,viewHeight:0,contWidth:0,contHeight:0,maxX:0,maxY:0},this._isStop=!1,this._oTouch=null,this._oAnimation=null},_setWrapperElement:function(t){this._htWElement.view=jindo.$Element(t),this._htWElement.base=jindo.$Element(this._htWElement.view.query("."+this.option("sClassPrefix")+"base")),this._htWElement.container=this._htWElement.base?this._htWElement.base.query("."+this.option("sClassPrefix")+"container"):this._htWElement.view.query("."+this.option("sClassPrefix")+"container")||this._htWElement.view.first(),this._htWElement.container=jindo.$Element(this._htWElement.container),this._htWElement.view.css({overflow:"hidden",zIndex:this.option("nZIndex")}),this._htWElement.base&&this._htWElement.base.css({position:"relavite"}),this._htWElement.container.css({left:"0px",top:"0px"}),this._createOffsetBugDummyTag()},_onActivate:function(){this._oTouch||(this._oTouch=new jindo.m.Touch(this._htWElement.view.$value(),{nMoveThreshold:0,nUseDiagonal:0,bVertical:this.bUseH,bHorizental:!this.bUseH,nMomentumDuration:200,nTapThreshold:1,nSlopeThreshold:5,nEndEventThreshold:jindo.m.getDeviceInfo().win8?100:0,bActivateOnload:!1})),this._attachEvent(),this._attachAniEvent(),this._oTouch.activate()},_onDeactivate:function(){this._detachEvent(),this._detachAniEvent(),this._oTouch.deactivate(),this._oAnimation&&this._oAnimation.deactivate()},_attachEvent:function(){this._htEvent={},this._htEvent.touchStart=jindo.$Fn(this._onStart,this).bind(),this._htEvent.touchMove=jindo.$Fn(this._onMove,this).bind(),this._htEvent.touchEnd=jindo.$Fn(this._onEnd,this).bind(),this._oTouch.attach({touchStart:this._htEvent.touchStart,touchMove:this._htEvent.touchMove,touchEnd:this._htEvent.touchEnd}),this.option("bAutoResize")&&(this._htEvent.resize=jindo.$Fn(this._onResize,this).bind(),jindo.m.bindRotate(this._htEvent.resize),jindo.m.bindPageshow(this._htEvent.resize))},_detachEvent:function(){this._oTouch.detachAll(),this.option("bAutoResize")&&(jindo.m.unbindRotate(this._htEvent.resize),jindo.m.unbindPageshow(this._htEvent.resize))},_getX:function(t){return t>=0?0:t<=this._htSize.maxX?this._htSize.maxX:t},_getY:function(t){return t>=0?0:t<=this._htSize.maxY?this._htSize.maxY:t},_attachAniEvent:function(){this._oAnimation&&(this._htEvent.endAni=jindo.$Fn(this._onEndAniImpl,this).bind(),this._oAnimation.attach({end:this._htEvent.endAni}))},_detachAniEvent:function(){this._oAnimation&&this._oAnimation.detachAll()},set:function(){var t=Array.prototype.slice.apply(arguments);return t.length>=1&&(this._oAnimation=t.shift(),this._oAnimation.setStyle(t),this._attachAniEvent()),this._oAnimation},getAnimation:function(){return this._oAnimation},isPlaying:function(){return this._oAnimation?this._oAnimation.isPlaying():!1},isAnimating:this.isPlaying,refresh:function(){},resize:function(){var t=this._htWElement.view,e=this._htWElement.container,n=parseInt(t.css("borderLeftWidth"),10),i=parseInt(t.css("borderRightWidth"),10),s=parseInt(t.css("borderTopWidth"),10),o=parseInt(t.css("borderBottomWidth"),10);n=isNaN(n)?0:n,i=isNaN(i)?0:i,s=isNaN(s)?0:s,o=isNaN(o)?0:o,this._htSize.viewWidth=t.width()-n-i,this._htSize.viewHeight=t.height()-s-o,this._htSize.contWidth=e.width(),this._htSize.contHeight=e.height()},_calcMomentum:function(t,e,n,i,s,o){var a=this.option("nDeceleration"),h=n/a,r=0,f=0;return t>0&&h>i?(f=o/(6/(h/e*a)),i+=f,e=e*i/h,h=i):0>t&&h>s&&(f=o/(6/(h/e*a)),s+=f,e=e*s/h,h=s),h*=0>t?-1:1,r=e/a,{nDist:h,nTime:Math.round(r)}},_onStart:function(t){return this.isPlaying()?void t.oEvent.stop():(this._clearOffsetBug(),void(this.fireEvent("beforeTouchStart",t)?(this._isStop=!1,this._startImpl(t),this.fireEvent("touchStart",jindo.$Jindo.mixin(t,{}))||t.stop()):t.stop()))},_onMove:function(t){if(this._clearOffsetBug(),this.fireEvent("beforeTouchMove",t)){var e=this._preventSystemEvent(t);e&&!this.isPlaying()&&(this._bClickBug&&this._htWElement.container.css("pointerEvents","none"),this._moveImpl(t)),e||this.fireEvent("scroll");var n=jindo.$Jindo.mixin(t,{});n.bPreventDefaultEvent=e,this.fireEvent("touchMove",n)||t.stop()}else t.stop()},_onEnd:function(t){this.isPlaying()||(this._isStop||this._clearOffsetBug(),this.fireEvent("beforeTouchEnd",t)?(t.sMoveType===jindo.m.MOVETYPE[3]||t.sMoveType===jindo.m.MOVETYPE[4]||t.sMoveType===jindo.m.MOVETYPE[5]?this._isStop?t.oEvent.stop(jindo.$Event.CANCEL_ALL):this._tapImpl&&this._tapImpl():t.sMoveType===jindo.m.MOVETYPE[0]||t.sMoveType===jindo.m.MOVETYPE[1]||t.sMoveType===jindo.m.MOVETYPE[2]?this._endImpl(t):this._restore&&this._restore(),this.fireEvent("touchEnd",jindo.$Jindo.mixin(t,{}))||t.stop()):t.stop(),this._bClickBug&&this._htWElement.container.css("pointerEvents","auto"))},_preventSystemEvent:function(t){var e=t.oEvent;return t.sMoveType===jindo.m.MOVETYPE[0]?this._bUseH?(e.stop(),!0):!1:t.sMoveType===jindo.m.MOVETYPE[1]?this._bUseV?(e.stop(),!0):!1:t.sMoveType===jindo.m.MOVETYPE[2]?this._bUseDiagonalTouch?(e.stop(),!0):!1:t.sMoveType===jindo.m.MOVETYPE[6]||t.sMoveType===jindo.m.MOVETYPE[7]||t.sMoveType===jindo.m.MOVETYPE[8]?(e.stop(),!0):(e.stop(),!0)},_onResize:function(t){"rotate"===t.sType?this.fireEvent("rotate",{isVertical:t.isVertical})&&this._resizeImpl(t):this._resizeImpl(t)},_getMomentumData:function(t,e,n){var i={nDist:0,nTime:0},s={nDist:0,nTime:0},o={momentumX:t.nMomentumX,momentumY:t.nMomentumY,distanceX:t.nDistanceX,distanceY:t.nDistanceY,x:this._nX,y:this._nY,nextX:this._nX,nextY:this._nY};return this.option("bUseMomentum")&&(t.nMomentumX&&t.nMomentumX>e||t.nMomentumY&&t.nMomentumY>e)?(this._bUseH&&(i=this._calcMomentum(t.nDistanceX,t.nSpeedX,t.nMomentumX,-this._nX,-this._htSize.maxX+this._nX,n?this._htSize.viewWidth:0)),this._bUseV&&(s=this._calcMomentum(t.nDistanceY,t.nSpeedY,t.nMomentumY,-this._nY,-this._htSize.maxY+this._nY,n?this._htSize.viewHeight:0)),o.nextX=this._nX+i.nDist,o.nextY=this._nY+s.nDist,o.duration=Math.max(Math.max(i.nTime,s.nTime),10),o.duration=jindo.m.getOsInfo().android?.7*o.duration:o.duration):o.duration=0,o},_makeStylePos:function(t){var e=this.getAnimation(),n=jindo.m.getTranslateOffset(t),i=jindo.m.getStyleOffset(t),s={top:n.top+i.top+"px",left:n.left+i.left+"px"};s[e.p("Transform")]=e.getTranslate("0px","0px"),t.css(s),this._htOffsetBug.elDummyTag.focus()},_createOffsetBugDummyTag:function(){this._hasOffsetBug()&&(this._htOffsetBug.elDummyTag=jindo.$$.getSingle("._offsetbug_dummy_atag_",this._htWElement.view.$value()),this._htOffsetBug.elDummyTag||(this._htOffsetBug.elDummyTag=jindo.$("<a href='javascript:void(0);' style='position:absolute;height:0px;width:0px;' class='_offsetbug_dummy_atag_'></a>"),this._htWElement.view.append(this._htOffsetBug.elDummyTag)))},_clearOffsetBug:function(){this._hasOffsetBug()&&(clearTimeout(this._htOffsetBug.timer),this._htOffsetBug.timer=-1)},_fixOffsetBugImpl:function(){if(this._hasOffsetBug()){var t=this,e=this.getAnimation().getTarget(!0);this._clearOffsetBug(),this._htOffsetBug.timer=setTimeout(function(){e&&t._makeStylePos(e)},200)}},_hasOffsetBug:function(){return this._htOffsetBug.hasBug},destroy:function(){var t;this.deactivate();for(t in this._htWElement)this._htWElement[t]=null;this._htWElement=null;for(t in this._htEvent)this._htEvent[t]=null;this._htEvent=null,this._oTouch&&this._oTouch.destroy(),this._oAnimation&&this._oAnimation.destroy()}}).extend(jindo.m.UIComponent),jindo.m.Flick=jindo.$Class({$init:function(){this.option({bHorizontal:!0,sClassPrefix:"flick-",sContentClass:"ct",bUseCircular:!1,nTotalContents:3,nFlickThreshold:40,nDuration:100,nBounceDuration:100,fpPanelEffect:jindo.m.Effect.cubicEaseIn,nDefaultIndex:0,bFitContentSize:!0,nDeceleration:.001,bUseMomentum:!1})},_initVar:function(){jindo.m.SwipeCommon.prototype._initVar.apply(this),this._bUseH=this.option("bHorizontal"),this._bUseV=!this._bUseH,this._bUseCircular=this.option("bUseCircular"),this._nContentIndex=0,this._welElement=null,this._aPos=[],this._nRange=null,this._nDefaultPanel=3,this._hasKitkatHighlightBug=jindo.m._hasKitkatHighlightBug(),this._nKitkatHighlightBug=-1},_setWrapperElement:function(t){jindo.m.SwipeCommon.prototype._setWrapperElement.call(this,t);var e=this.option("bHorizontal")?"height":"width";this._htWElement.aPanel=this._htWElement.container.queryAll("."+this.option("sClassPrefix")+this.option("sContentClass"));var n=jindo.$A(this._htWElement.aPanel);this._bUseCircular||(n=n.filter(function(t){return jindo.$Element(t).visible()})),this._htWElement.container.css({position:"relative"}).css(e,"100%"),this._htWElement.aPanel=n.forEach(function(t,n,i){i[n]=jindo.$Element(t).css(e,"100%")}).$value()},_checkIndex:function(t){var e=!0,n=this.getTotalContents()-1;return(isNaN(1*t)||0>t)&&(e=!1),t>n&&(e=!1),e},_refreshPanelInfo:function(){var t=0;this._aPos=[0];for(var e=0,n=this._bUseH?"width":"height",i=this.getTotalContents();i>e;e++)t-=null!=this._nRange?this._nRange:this._htWElement.aPanel[e][n](),this._aPos.push(t)},_onActivate:function(){jindo.m.SwipeCommon.prototype._onActivate.apply(this)},_onDeactivate:function(){jindo.m.SwipeCommon.prototype._onDeactivate.apply(this)},set:function(){if(!this._oAnimation){jindo.m.SwipeCommon.prototype.set.apply(this,Array.prototype.slice.apply(arguments)),this._bUseCircular?this.option("nTotalContents",parseInt(this.option("nTotalContents"),10)):this.option("nTotalContents",this._htWElement.aPanel.length);var t=this.option("nDefaultIndex");this._checkIndex(t)||(t=0),this.resize(),this.refresh(t)}return this._oAnimation},refresh:function(t,e,n){jindo.m.SwipeCommon.prototype.refresh.call(this),t="undefined"==typeof t?this.getContentIndex():t,this._hasKitkatHighlightBug&&this._htWElement.container.addClass(jindo.m.KITKAT_HIGHLIGHT_CLASS),this._moveTo(t,{duration:0,fireEvent:e,fireMoveEvent:n,corrupt:!0})},resize:function(){jindo.m.SwipeCommon.prototype.resize.call(this),this.option("bFitContentSize")||this._bUseCircular?(this._nRange=this._bUseH?this._htSize.viewWidth:this._htSize.viewHeight,0==this._nRange&&(this._nRange=this._htWElement.view[this._bUseH?"width":"height"]())):this._nRange=null,this._refreshPanelInfo(),null!=this._nRange&&(this._bUseH?(this._htSize.maxX=(this.option("nTotalContents")-1)*-this._nRange,this._nX=this._aPos[this.getContentIndex()]):(this._htSize.maxY=(this.option("nTotalContents")-1)*-this._nRange,this._nY=this._aPos[this.getContentIndex()]))},getElement:function(){var t=this.getContentIndex();return this._bUseCircular?this._welElement?this._welElement:(t%=this._nDefaultPanel,this._htWElement.aPanel[t]):this._htWElement.aPanel[t]},getNextElement:function(){var t;return this._bUseCircular?(t=this._getIndexByElement(this.getElement()),t=((t+1)%this._nDefaultPanel>this._nDefaultPanel-1?0:t+1)%this._nDefaultPanel):t=this.getNextIndex(),this._htWElement.aPanel[t]},getPrevElement:function(){var t;return this._bUseCircular?(t=this._getIndexByElement(this.getElement()),t=0>t-1?this._nDefaultPanel-1:t-1):t=this.getPrevIndex(),this._htWElement.aPanel[t]},_getIndexByElement:function(t){var e=-1;return jindo.$A(this._htWElement.aPanel).forEach(function(n,i){n.isEqual(t)&&(e=i)}),e},getContentIndex:function(){return parseInt(this._nContentIndex,10)},getNextIndex:function(){var t=this.getContentIndex()+1,e=this.getTotalContents()-1;return this._bUseCircular&&t>e&&(t=0),Math.min(e,t)},getPrevIndex:function(){var t=this.getContentIndex()-1;return this._bUseCircular&&0>t&&(t=this.getTotalContents()-1),Math.max(0,t)},getTotalContents:function(){return this._bUseCircular?this.option("nTotalContents"):this._htWElement.aPanel.length},setTotalContents:function(t){isNaN(t)||1>t||(t=parseInt(t,10),this.getContentIndex()+1>t&&this._moveTo(t-1,{duration:0,fireEvent:!0,fireMoveEvent:!0}),this.option("nTotalContents",t),this.resize())},getTotalPanels:function(){return this._htWElement.aPanel.length},getPanels:function(){return this._htWElement.aPanel},moveTo:function(t,e){return t!=this.getContentIndex()?this._moveTo(t,{duration:e}):void 0},_moveTo:function(t,e){if(!(null==this._nRange&&this._aPos.indexOf(this._bUseH?this._htSize.maxX:this._htSize.maxY)<t)){var n={duration:"undefined"==typeof e.duration?this.option("nDuration"):e.duration,fireEvent:"undefined"==typeof e.fireEvent?!0:e.fireEvent,fireMoveEvent:"undefined"==typeof e.fireMoveEvent?!1:e.fireMoveEvent,corrupt:"undefined"==typeof e.corrupt?!1:e.corrupt,direct:"undefined"==typeof e.direct?!1:e.direct};if(!(this.isPlaying()||isNaN(t)||0>t||t>=this.getTotalContents())){var i=this._bUseH?this._nX:this._nY,s=this._getPos(t);if(this._bUseCircular){var o=this._posToIndex(i),a=this.getTotalContents();0==o&&t==a-1?this.option("nTotalContents")>=3&&(s=this._nRange):o==a-1&&0==t&&(s=this._getPos(o)-this._nRange)}if(i!=s)this._move(i,s,{duration:n.duration,contentsNextIndex:t,fireEvent:n.fireEvent,fireMoveEvent:n.fireMoveEvent,corrupt:n.corrupt,direct:e.direct});else if(0===n.duration&&n.fireEvent)if(n.fireMoveEvent)this._fireMoveEvent(t)&&this._fireMoveEvent();else{var h={next:null,moveCount:0,corrupt:n.corrupt,contentsNextIndex:t};this._fireFlickingEvent("beforeFlicking",h)&&(this._fireFlickingEvent("flicking",h),this._fireFlickingEvent("afterFlicking",h))}}}},moveNext:function(t){var e={duration:t,direct:!1};if(this._bUseCircular&&this.option("nTotalContents")<3){var n=this.getContentIndex();this._bUseH?this._nX=0==n?1:this._nX-1:this._nY=0==n?1:this._nY-1,e.direct=!0}this._moveTo(this.getNextIndex(),e)},movePrev:function(t){var e={duration:t,direct:!1};if(this._bUseCircular&&this.option("nTotalContents")<3){var n=this.getContentIndex();e.direct=!0,this._bUseH?this._nX=0==n?this._aPos[this.getTotalContents()-1]-1:this._nX+1:this._nY=0==n?this._aPos[this.getTotalContents()-1]-1:this._nY+1,this._moveTo(this.getNextIndex(),e)}else this._moveTo(this.getPrevIndex(),e)},_startImpl:function(){this.isPlaying()||(this._nPosToIndex=this._posToIndex(this._bUseH?this._nX:this._nY))},_moveImpl:function(t){var e=this._bUseH?t.nVectorX:t.nVectorY,n=this._bUseH?t.nDistanceX:t.nDistanceY,i=0>n,s=this._bUseH?this._nX:this._nY,o=i?this.getNextIndex():this.getPrevIndex();return s+=this._bUseCircular?e:o==this.getContentIndex()?e/2:e,this._nX=this._bUseH?s:0,this._nY=this._bUseV?s:0,t.bNext=i,this._moveAfterCall&&this._moveAfterCall(t),i},_endImpl:function(t){var e=null,n=(this._bUseH?t.nDistanceX:t.nDistanceY)<0,i=this.getContentIndex(),s=n?this.getNextIndex():this.getPrevIndex(),o=this._getPos(i),a=Math.abs((this._bUseH?this._nX:this._nY)-o),h=i===s||a<parseInt(this.option("nFlickThreshold"),10)||this._aPos.indexOf(this._bUseH?this._htSize.maxX:this._htSize.maxY)<s;if(0!=a)if(h)this._restore();else if(e=this._getMomentumData(t,1.5),0===e.duration||n&&i===this.getTotalContents()-1||!n&&0===i){var r=this._bUseH?this._nX:this._nY;(n&&r<this._aPos[s]||!n&&r>this._aPos[s])&&(this._bUseCircular&&this.option("nTotalContents")<3?0!=i||1!=s||n||(this._bUseH?this._nX=this._aPos[this.getTotalContents()-1]-1:this._nY=this._aPos[this.getTotalContents()-1]-1):this._setCurrentPos(i,n)),this._moveTo(null==this._nRange?this._getNextIndexByView(i,n):s,{duration:this.option("nDuration"),direct:!0})}else{var f=this._posToIndex(this._bUseH?e.nextX:e.nextY);f==i?this._restore():(this._bUseCircular?(i+=n?1:-1,this._setCurrentPos(i,n)):this._setCurrentPos(i,n),this._moveTo(f,{duration:e.duration}))}},_getNextIndexByView:function(t,e){return e?this.getNextIndex():this.getPrevIndex()},_setCurrentPos:function(t){this._bUseH?this._nX=this._aPos[t]:this._nY=this._aPos[t]},_resizeImpl:function(){this.resize()},_restore:function(){if(this._bUseH||this._bUseV){var t,e=this._getPos(this.getContentIndex());if(jindo.m.SlideFlicking&&this instanceof jindo.m.SlideFlicking){var n=jindo.m.getTranslateOffset(this._htWElement.container);t=this._bUseH?n.left:n.top}else t=this._bUseH?this._nX:this._nY;e!==t&&this._move(t,e,{duration:this.option("nBounceDuration"),restore:!0})}},_getRevisionNo:function(t){var e=this.getTotalContents();return 0>t?t+=e:t>e-1&&(t%=e),t},_fireCustomBeforeEvent:function(t){if(t.restore){if(!this._fireRestoreEvent("beforeRestore",t))return!1}else if(t.fireMoveEvent){if(0==t.moveIndex&&!this._fireMoveEvent(t.contentsNextIndex))return!1}else if(!this._fireFlickingEvent("beforeFlicking",t))return!1;return!0},_setPanelEndInfo:function(t){t.restore?(this._nX=this._bUseH?this._getPos(t.no):0,this._nY=this._bUseV?this._getPos(t.no):0):(t.no=this._getRevisionNo(t.no),t.direct&&t.moveCount>1?this._updateFlickInfo(t.no,this._htWElement.aPanel[t.no]):this._updateFlickInfo(t.no,t.next?this.getNextElement():this.getPrevElement()))},_fireCustomEvent:function(t){t.restore?this._fireRestoreEvent("restore",t):t.fireMoveEvent?(0===t.duration||t.moveCount==t.moveIndex+1)&&this._fireMoveEvent():(this._fireFlickingEvent("flicking",t),this._fireFlickingEvent("afterFlicking",t))},_fireFlickingEvent:function(t,e){if("undefined"==typeof this._htEventHandler[t])return!0;var n={nContentsIndex:this.getContentIndex(),bNext:e.next};return/before/.test(t)&&(n.nContentsNextIndex=e.direct||0===e.duration&&e.moveCount>1||null==e.next?e.contentsNextIndex:e.next?this.getNextIndex():this.getPrevIndex()),n.nMoveCount=e.moveCount,n.bCorrupt=e.corrupt,n[this._bUseH?"bLeft":"bTop"]=n.bNext,this.fireEvent(t,n)},_fireRestoreEvent:function(t){return this.fireEvent(t,{nContentsIndex:this.getContentIndex()})},_fireMoveEvent:function(t){return"undefined"==typeof t?this.fireEvent("move",{nContentsIndex:this.getContentIndex()}):this.fireEvent("beforeMove",{nContentsIndex:this.getContentIndex(),nContentsNextIndex:t})},_updateFlickInfo:function(t,e){this._nContentIndex="undefined"==typeof t?this.getContentIndex():t,e="undefined"==typeof e?this.getElement():e,this._nX=this._bUseH?this._getPos(this._nContentIndex):0,this._nY=this._bUseV?this._getPos(this._nContentIndex):0,this._welElement=e},_onEndAniImpl:function(){this._bUseCircular},_makeOption:function(t){var e=jindo.$Jindo.mixin({duration:0,restore:!1,fireEvent:!0,fireMoveEvent:!1,moveCount:1,moveIndex:0,corrupt:!1,useCircular:this._bUseCircular,range:this._nRange},t||{});return e.restore&&(e.moveCount=0),e.moveCount>1&&0===e.duration&&(e.corrupt=!0),e.direct=e.direct||jindo.m.SlideFlicking&&this instanceof jindo.m.SlideFlicking&&"undefined"==typeof this._htEventHandler.beforeFlicking&&"undefined"==typeof this._htEventHandler.flicking&&"undefined"==typeof this._htEventHandler.afterFlicking,e},_moveWithEvent:function(t,e,n){var i=this,s={};return n.no=this._posToIndex(t),s=jindo.$Jindo.mixin(n,{}),!s.fireMoveEvent&&s.moveCount>1&&(s.contentsNextIndex=s.no),i._panelEndBeforeCall&&i._panelEndBeforeCall(s),this._oAnimation._oMorph.pushCall(function(){s.fireEvent&&!i._fireCustomBeforeEvent(s)&&(this.clear(),i._restore())}),this._oAnimation.move(this._bUseH?t:0,this._bUseV?t:0,e,s),this._oAnimation._oMorph.pushCall(function(){i._setPanelEndInfo(s),i._panelEndAfterCall&&i._panelEndAfterCall(s),s.fireEvent&&i._fireCustomEvent(s)}),this._oAnimation._oMorph},_move:function(t,e,n){if(!this._bUseCircular){var i=this._bUseH?this._htSize.maxX:this._htSize.maxY;e=i>e?i:e}if(t!==e){this._clearOffsetBug();var s=t>e,o=this._getStepCount(t,e);if(n=n||{},n.moveCount=o,n.next=s,n=this._makeOption(n),n.restore)return void this._moveWithEvent(e,n.duration,n).play();if(0==n.duration)this._moveWithEvent(e,0,n).play();else{if(n.direct)this._moveWithEvent(e,n.duration,n).play();else for(var a=0,h=t,r=0,f=this.option("fpPanelEffect")(0,n.duration),u=0;o>u;u++)n.moveIndex=u,r=this._getPanelEndPos(h,e,s),a=f((u+1)/o)-f(u/o),this._moveWithEvent(r,a,n),h=r;this._oAnimation._oMorph.play()}}},_getPos:function(t){return 0>t||t>=this._aPos.length?(console.error("wrong index",t),0):this._aPos[t]},_isPosPoint:function(t){return-1!=this._aPos.indexOf(t)},_getStepCount:function(t,e){var n=t>e,i=this._posToIndex(t),s=this._posToIndex(e),o=Math.abs(s-i);return n||this._isPosPoint(t)||!this._isPosPoint(e)||o++,o},_posToIndex:function(t){for(var e,n=0,i=-1,s=this._aPos.length;s>n;n++){if(e=this._aPos[n],!(e>t)){if(t==e){i++;break}break}i++}return i},_getPanelEndPos:function(t,e,n){var i,s=this._posToIndex(t);return!n&&!this._isPosPoint(t)&&s++,s+=n?1:-1,i=this._bUseCircular&&0>s?t+e:this._getPos(s),null==this._nRange&&n&&(i=e>i?e:i),i},_getTranslate:function(t){return this._oAnimation.getTranslate(this._bUseH?t:0,this._bUseV?t:0)},_tapImpl:function(){if(this._hasKitkatHighlightBug){this._htWElement.container.removeClass(jindo.m.KITKAT_HIGHLIGHT_CLASS),this._htWElement.container._element.clientHeight;var t=this;clearTimeout(this._nKitkatHighlightBug),this._nKitkatHighlightBug=setTimeout(function(){t._htWElement.container.addClass(jindo.m.KITKAT_HIGHLIGHT_CLASS)},200)}},destroy:function(){jindo.m.SwipeCommon.prototype.destroy.apply(this)}}).extend(jindo.m.SwipeCommon),jindo.m.CoverFlicking=jindo.$Class({$init:function(t,e){this.option(e||{}),this._initVar(),this._setWrapperElement(t),this.option("bActivateOnload")&&this.activate()},_onActivate:function(){jindo.m.Flick.prototype._onActivate.apply(this);var t=this;this.set(new jindo.m.Cover(this._getAnimationOption(this.option("nDefaultScale")?{nDefaultScale:this.option("nDefaultScale")}:{})).attach({set:function(e){t._setStyle(e.css)}}),this._htWElement.aPanel)},_setStyle:function(t){t[this._bUseH?"width":"height"]="100%",this._htWElement.container.css(t),this._changeTarget(!0)},refresh:function(t){jindo.m.Flick.prototype.refresh.call(this,t),this._changeTarget(!0)},_changeTarget:function(t){var e=this.getElement(),n=t?this.getNextElement():this.getPrevElement();return n=e.isEqual(n)?null:n,this._oAnimation.change(e,n,t),{target:e,zoom:n}},_moveTo:function(t,e){var n=this.getTotalContents()-1,i=this.getContentIndex(),s=t>i;return this.isPlaying()||isNaN(t)||0>t||t>n?!1:(this._bUseCircular&&(i===n&&0===t?s=!0:0===i&&t===n&&(s=!1)),this._changeTarget(s),void jindo.m.Flick.prototype._moveTo.call(this,t,e))},_panelEndBeforeCall:function(t){!t.useCircular&&0==t.duration&&t.moveCount>1&&this._updateFlickInfo(t.no,this._htWElement.aPanel[t.no])},_panelEndAfterCall:function(t){var e=this._changeTarget(t.next),n=this._oAnimation._oMorph._nPtr;if(this._oAnimation._oMorph._aQueue.length>n){var i=this._oAnimation._oMorph._aQueue[n+1];i.length>3&&(e.target&&(i[0]=e.target),e.zoom&&(i[2]=e.zoom))}},_moveAfterCall:function(t){this._changeTarget(t.bNext),this._oAnimation.move(this._nX,this._nY,0,this._makeOption({next:t.bNext}))},destroy:function(){jindo.m.Flick.prototype.destroy.apply(this)}}).extend(jindo.m.Flick),jindo.m.Slide=jindo.$Class({$init:function(t){this.option({}),this.option(t||{})},setStyle:function(t){var e={};return e[this.p("TransitionProperty")]=""==this.sCssPrefix?"tranform":"-"+this.sCssPrefix+"-transform",e[this.p("TransitionDuration")]="0ms",e[this.p("Transform")]=this.getTranslate(0,0),this._welTarget=t[0].css(e),this.fireEvent("set",{css:e}),e},move:function(t,e,n,i){i=i||{};var s,o=this.getTarget(!0);if(i.useCircular)this.option("bUseH")?t=this._getPos(t,i):e=this._getPos(e,i);else if(this.option("bHasOffsetBug")){var a=jindo.m.getStyleOffset(o);t-=a.left,e-=a.top}return s={"@transitionProperty":""==this.sCssPrefix?"tranform":"-"+this.sCssPrefix+"-transform","@transform":this.getTranslate(t+"px",e+"px")},n?this._oMorph.pushAnimate(n,[o,s]):o.css(this.toCss(s)),this._oMorph
},_getPos:function(t,e){var n=t,i=e.next,s=e.range;if(e.restore)n=0;else if(0!=e.duration&&t%s===0)n=i?-s:s;else if("undefined"!=typeof e.startIndex){var o=-1*parseInt(n/s,10);i=o==e.startIndex||o>e.startIndex?!0:!1,n=n%s+(i?-1:1)*Math.abs(o-e.startIndex)*s}else n=n%s+(i?0:2*s),n%=s;return n}}).extend(jindo.m.Animation),jindo.m.SlideFlicking=jindo.$Class({$init:function(t,e){this.option(e||{}),this._initVar(),this._oDocFragment=document.createDocumentFragment(),this._setWrapperElement(t),this.option("bActivateOnload")&&this.activate()},_onActivate:function(){jindo.m.Flick.prototype._onActivate.apply(this);var t=this;this.set(new jindo.m.Slide(this._getAnimationOption()).attach({set:function(e){t._setStyle(e.css)}}),this._htWElement.container)},_setStyle:function(t){var e={},n=0,i=this._bUseH?"width":"height",s=this._bUseH?"left":"top";jindo.$Jindo.mixin(e,t),this._bUseCircular&&(e[i]="100%",e[s]="-100%",t.position="absolute",t[i]="100%",t.left=0,t.top=0),this._bUseH&&(e.clear="both",t["float"]="left"),this._htWElement.container.css(e),jindo.$A(this._htWElement.aPanel).forEach(function(e,i){this._bUseCircular&&(n=(i+1)%this._nDefaultPanel*100+"%",this._hasOffsetBug()?t[s]=n:t[jindo.m._toPrefixStr("Transform")]=this._getTranslate(n)),e.css(t)},this)},resize:function(){jindo.m.Flick.prototype.resize.call(this);var t=this._bUseH?"width":"height",e=this._htWElement.view[t]();if(!this._bUseCircular){if(this._htWElement.container.css(t,-this._aPos[this._aPos.length-1]+"px"),this.option("bFitContentSize"))jindo.$A(this._htWElement.aPanel).forEach(function(n){n.css(t,e+"px")});else{var n=this._aPos[this._aPos.length-1]+e;0>n&&(jindo.$A(this._aPos).forEach(function(t,e){n>t&&(this._aPos.length=e,jindo.$A.Break())},this),this._aPos.push(n),this._bUseH?this._htSize.maxX=n:this._htSize.maxY=n,this._aPos.length<=this.getContentIndex()&&(this._nContentIndex=this._aPos.length-1))}this._updateFlickInfo(),this._oAnimation.move(this._nX,this._nY)}},_restorePanel:function(t){t=t||this.getElement();var e=this._getIndexByElement(t),n=this._hasOffsetBug()?this._bUseH?"left":"top":jindo.m._toPrefixStr("Transform"),i=(0>e-1?this._nDefaultPanel-1:e-1)%this._nDefaultPanel,s=((e+1)%this._nDefaultPanel>this._nDefaultPanel-1?0:e+1)%this._nDefaultPanel,o=e%this._nDefaultPanel;this._welElement=this._htWElement.aPanel[o],this._htWElement.container.css(jindo.m._toPrefixStr("Transform"),this._getTranslate(0)),this._welElement.css(n,this._getPosValue("100%")).css("zIndex",10),this._htWElement.aPanel[i].css(n,this._getPosValue("0%")).css("zIndex",1),this._htWElement.aPanel[s].css(n,this._getPosValue("200%")).css("zIndex",1),jindo.m.getOsInfo().ios&&this._bUseCircular&&(this._oDocFragment.appendChild(this._htWElement.aPanel[i].$value()),this._oDocFragment.appendChild(this._htWElement.aPanel[s].$value()),this._htWElement.container.$value().appendChild(this._oDocFragment))},_getPosValue:function(t){return this._hasOffsetBug()?t:this._getTranslate(t)},_panelEndAfterCall:function(){this._bUseCircular&&this._restorePanel()},_moveAfterCall:function(t){this._oAnimation.move(this._nX,this._nY,0,this._makeOption({next:t.bNext}))},_onEndAniImpl:function(){jindo.m.Flick.prototype._onEndAniImpl.apply(this),this._bUseCircular||this._fixOffsetBugImpl()},destroy:function(){jindo.m.Flick.prototype.destroy.apply(this)}}).extend(jindo.m.Flick),jindo.m.SlideTab=jindo.$Class({$init:function(t,e){this.option({nSlideDuration:200,sTimingFunction:"ease-in-out",nCountPerVeiw:3}),this.option(e||{}),this._initData(),this.option("bActivateOnload")&&(this.resize(),this.activate()),this.select(this.option("nDefaultIndex"),{bEffect:!1})},_initVar:function(){this.$super._initVar(),this._nCurrentPage=1,this._nTotalPage=1,this._nPageWidth=0,this._aDummyTab=[],this._oEffect=null,this._isNext=null},_setWrapperElement:function(t){var e=this._sPrefix;this.$super._setWrapperElement(t),this._htWElement.tab_view=jindo.$Element(this._htWElement.baseElement.query("."+e+"tabview")),this._htWElement.tab_container=jindo.$Element(this._htWElement.baseElement.query("."+e+"tab-cont")),this._htWElement.prev=jindo.$Element(this._htWElement.baseElement.query("."+e+"prev")),this._htWElement.next=jindo.$Element(this._htWElement.baseElement.query("."+e+"next")),this._htWElement.baseElement.css("position","relative"),this._htWElement.tab_view.css("overflow","hidden")},_initData:function(){this.$super._initData();var t,e=this.option("nCountPerVeiw"),n=null;this._nTotalPage=parseInt(this._aTab.length/e,10),t=this._aTab.length%e,t>0&&this._nTotalPage++,t=0==t?e:t;for(var i=0,s=e-t;s>i;i++)n=jindo.$("<li></li>"),this._aDummyTab.push(jindo.$Element(n)),this._htWElement.tab_container.append(n);this._oEffect=new jindo.m.LayerEffect(this._htWElement.tab_container.$value())},getCurrentPage:function(){return this._nCurrentPage},getTotalPage:function(){return this._nTotalPage},resize:function(){var t,e=this._nPageWidth;this._nPageWidth=this._htWElement.tab_view.width()-this._htWElement.prev.width()-this._htWElement.next.width(),t=this._nPageWidth/this.option("nCountPerVeiw"),e>this._nPageWidth?(this._setTabWidth(t),this._htWElement.tab_container.width(this._nPageWidth*this._nTotalPage)):(this._htWElement.tab_container.width(this._nPageWidth*this._nTotalPage),this._setTabWidth(t)),this._htWElement.tab_container.css("left",(this._nCurrentPage-1)*-this._nPageWidth)},_setTabWidth:function(t){jindo.$A(this._aTab).forEach(function(e){e.width(t)}),jindo.$A(this._aDummyTab).forEach(function(e){e.width(t)})},_fireEventBeforePrev:function(){return this.fireEvent("beforePrev",{nPage:this._nCurrentPage,nIndex:this._nCurrentIndex,nTotalPage:this._nTotalPage})},_fireEventPrev:function(){this.fireEvent("prev",{nPage:this._nCurrentPage,nIndex:this._nCurrentIndex,nTotalPage:this._nTotalPage})},_fireEventBeforeNext:function(){return this.fireEvent("beforeNext",{nPage:this._nCurrentPage,nIndex:this._nCurrentIndex,nTotalPage:this._nTotalPage})},_fireEventNext:function(){this.fireEvent("next",{nPage:this._nCurrentPage,nIndex:this._nCurrentIndex,nTotalPage:this._nTotalPage})},_onAfterSelect:function(t){this.select(this._getIdx(t))},_beforeSelect:function(){},select:function(t,e){this.$super.select(t);var n=parseInt(t/~~this.option("nCountPerVeiw"),10)+1,i=n-this.getCurrentPage();i>0?this.next(i,e):0>i&&this.prev(-i,e)},_attachEvent:function(){this.$super._attachEvent(),this._htEvent.prev_click={ref:jindo.$Fn(this._onPrev,this).attach(this._htWElement.prev,"click"),el:this._htWElement.prev},this._htEvent.next_click={ref:jindo.$Fn(this._onNext,this).attach(this._htWElement.next,"click"),el:this._htWElement.next},this._oEffect.attach("afterEffect",jindo.$Fn(this._onAfterEffect,this).bind())},_detachEvent:function(){this._oEffect.detachAll(),this.$super._detachEvent()},_onAfterEffect:function(){this._isNext?(this._nCurrentPage++,this._fireEventNext()):(this._nCurrentPage--,this._fireEventPrev()),this._isNext=null,this._bSelect&&this.select((this._nCurrentPage-1)*this.option("nCountPerVeiw"))},_onPrev:function(t){return this._oPanelEffect&&this._oPanelEffect.isPlaying()?(t.stop(jindo.$Event.CANCEL_ALL),!1):void this.prev(1,{bSelect:!0})},prev:function(t,e){if(void 0!=t&&0>=t)return!1;t=t||1,e=e?e:{},this._bSelect=e.bSelect||!1;var n=this._nCurrentPage-t+1;n>1&&!this._oEffect.isPlaying()&&(e.bEffect||void 0==e.bEffect?this._fireEventBeforePrev()&&this._oEffect.slide({sDirection:"right",nDuration:this.option("nSlideDuration"),sTransitionTimingFunction:this.option("sTimingFunction"),nSize:this._nPageWidth*t}):(this._htWElement.tab_container.css("left",this._nPageWidth*t),this._onAfterEffect()),this._nCurrentPage=n,this._isNext=!1)},_onNext:function(t){return this._oPanelEffect&&this._oPanelEffect.isPlaying()?(t.stop(jindo.$Event.CANCEL_ALL),!1):void this.next(1,{bSelect:!0})},next:function(t,e){if(void 0!=t&&0>=t)return!1;t=t||1,e=e?e:{},this._bSelect=e.bSelect||!1;var n=this._nCurrentPage+t-1;n<this._nTotalPage&&!this._oEffect.isPlaying()&&this._fireEventBeforeNext()&&(this._nCurrentPage=n,this._isNext=!0,e.bEffect||void 0==e.bEffect?this._oEffect.slide({sDirection:"left",nDuration:this.option("nSlideDuration"),sTransitionTimingFunction:this.option("sTimingFunction"),nSize:this._nPageWidth*t}):(this._htWElement.tab_container.css("left",-this._nPageWidth*t),this._onAfterEffect()))},destroy:function(){this.deactivate();for(var t in this._aDummyTab)this._aDummyTab[t]=null;this._aDummyTab=null,this._initVar(),this._oEffect&&(this._oEffect.destroy(),this._oEffect=null),this.$super.destroy()}}).extend(jindo.m.CoreTab);